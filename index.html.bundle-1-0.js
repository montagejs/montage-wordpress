montageDefine("176abc9","ui/flow.reel/flow",{dependencies:["../component","frb/observers","./flow-bezier-spline","../../core/range-controller"],factory:function(e,t,n){var i=e("../component").Component,s=e("frb/observers").observeProperty,o=e("./flow-bezier-spline").FlowBezierSpline,a=e("../../core/range-controller").RangeController,r=/^(\d+)ms$/,l=/^(\d+)s$/,h=t.Flow=i.specialize({constructor:{value:function(){this._paths=[],this._visibleIndexes=[],this._needsClearVisibleIndexes=!0,this._slideOffsets={},this.defineBinding("_numberOfIterations",{"<-":"contentController.content.length"}),this.addOwnPropertyChangeListener("_numberOfIterations",this),window.addEventListener("resize",this,!1),this._newVisibleIndexes=[]}},slotContent:{serializable:!0,value:null},__flowTranslateComposer:{value:null},_flowTranslateComposer:{get:function(){return this.__flowTranslateComposer},set:function(e){this.__flowTranslateComposer&&(this.__flowTranslateComposer.removeEventListener("translateStart",this,!1),this.__flowTranslateComposer.removeEventListener("translateEnd",this,!1)),this.__flowTranslateComposer=e,this.__flowTranslateComposer.addEventListener("translateStart",this,!1),this.__flowTranslateComposer.addEventListener("translateEnd",this,!1)}},__firstIteration:{value:null},_firstIteration:{get:function(){return this.__firstIteration},set:function(e){this.__firstIteration=e,this.needsDraw=!0}},handleTranslateStart:{value:function(){this.callDelegateMethod("didTranslateStart",this)}},handleTranslateEnd:{value:function(){this.callDelegateMethod("didTranslateEnd",this)}},_scrollingMode:{value:"linear"},_transform:{value:null},_transformCss:{value:null},_transformPerspective:{value:null},scrollingMode:{serializable:!0,get:function(){return this._scrollingMode},set:function(e){switch(e){case"linear":case"drag":this._scrollingMode=e}}},_linearScrollingVector:{value:[-300,0]},linearScrollingVector:{seriazable:!0,get:function(){return this._linearScrollingVector},set:function(e){this._linearScrollingVector=e}},_repetition:{value:null},momentumDuration:{serializable:!0,value:650},_splinePaths:{value:null},splinePaths:{enumerable:!1,get:function(){return this._splinePaths||(this._splinePaths=[]),this._splinePaths},set:function(e){this._splinePaths=e}},_appendPath:{value:function(e){var t,n,i,s,a,r=new o,l=e.knots,h=e.knots.length,d=[],u=[],c=[],m=[],p=e.units,_=p?Object.keys(p):void 0;if(r._parameterKeys=_,i=r.parameters={},_)for(t=0;s=_[t];t++)i[s]={data:[],units:p[s]};for(t=0;t<h;t++){a=l[t],d[t]=a.knotPosition,c[t]=a.previousHandlerPosition,u[t]=a.nextHandlerPosition,m[t]=a.previousDensity;for(n in p)p.hasOwnProperty(n)&&i[n].data.push(a[n])}r.knots=d,r.previousHandlers=c,r.nextHandlers=u,r.densities=m,r._computeDensitySummation(),this.splinePaths.push(r),e.hasOwnProperty("headOffset")||(e.headOffset=0),e.hasOwnProperty("tailOffset")||(e.tailOffset=0),this._paths.push(e),this._updateLength()}},_paths:{value:null},paths:{get:function(){var e,t,n,i,s,o,a,r,l=(this.splinePaths.length,[]);for(s=0;r=this.splinePaths[s];s++){for(t=r.knots.length,e={knots:[],units:{}},o=0;o<t;o++)i={knotPosition:r.knots[o]},r.nextHandlers&&r.nextHandlers[o]&&(i.nextHandlerPosition=r.nextHandlers[o]),r.previousHandlers&&r.previousHandlers[o]&&(i.previousHandlerPosition=r.previousHandlers[o]),r.densities&&r.densities[o]&&(i.previousDensity=r.densities[o],i.nextDensity=r.densities[o]),e.knots.push(i);for(o in r.parameters)if(r.parameters.hasOwnProperty(o))for(e.units[o]=r.parameters[o].units,n=r.parameters[o].data.length,a=0;a<n;a++)e.knots[a][o]=r.parameters[o].data[a];this._paths[s].hasOwnProperty("headOffset")?e.headOffset=this._paths[s].headOffset:e.headOffset=0,this._paths[s].hasOwnProperty("tailOffset")?e.tailOffset=this._paths[s].tailOffset:e.tailOffset=0,l.push(e)}return l},set:function(e){var t,n=e.length;for(this._splinePaths=[],this._paths=[],t=0;t<n;t++)this._appendPath(e[t]);this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_isCameraEnabled:{value:!0},isCameraEnabled:{get:function(){return this._isCameraEnabled},set:function(e){var t=!!e;this._isCameraEnabled!==t&&(this._isCameraEnabled=t,this._isCameraUpdated=!0,this._needsComputeVisibleRange=!0,this.needsDraw=!0)}},_perspective:{value:500},perspective:{get:function(){return this._perspective},set:function(e){var t=parseFloat(e);isNaN(t)||this._perspective===t||(this._perspective=t,this._isCameraUpdated=!0,this._needsComputeVisibleRange=!0,this.needsDraw=!0)}},_cameraElement:{value:null},_cameraPosition:{value:[0,0,800]},cameraPosition:{get:function(){return this._cameraPosition},set:function(e){this._cameraPosition=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_viewpointPosition:{get:function(){return this._isCameraEnabled?this.cameraPosition:[.01*(50-this._sceneOffsetLeft)*this._width,.01*(50-this._sceneOffsetTop)*this._height,this._perspective]}},_cameraTargetPoint:{value:[0,0,0]},cameraTargetPoint:{get:function(){return this._cameraTargetPoint},set:function(e){this._cameraTargetPoint=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_viewpointTargetPoint:{get:function(){return this._isCameraEnabled?this.cameraTargetPoint:[.01*(50-this._sceneOffsetLeft)*this._width,.01*(50-this._sceneOffsetTop)*this._height,0]}},_cameraFov:{value:50},cameraFov:{get:function(){return this._cameraFov},set:function(e){this._cameraFov=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_viewpointFov:{get:function(){return this._isCameraEnabled?this.cameraFov:360*(Math.PI/2-Math.atan2(this._perspective,this._height/2))/Math.PI}},_cameraRoll:{value:0},cameraRoll:{get:function(){return this._cameraRoll},set:function(e){this._cameraRoll=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_sceneOffsetTop:{value:50},sceneOffsetTop:{get:function(){return this._sceneOffsetTop},set:function(e){this._sceneOffsetTop=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_sceneOffsetLeft:{value:50},sceneOffsetLeft:{get:function(){return this._sceneOffsetLeft},set:function(e){this._sceneOffsetLeft=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_sceneScaleX:{value:{numerator:1,denominator:1}},_sceneScaleY:{value:{numerator:1,denominator:1}},_sceneScaleZ:{value:{numerator:1,denominator:1}},_sceneScale:{value:{x:{numerator:1,denominator:1},y:{numerator:1,denominator:1},z:{numerator:1,denominator:1}}},_updateSceneScale:{value:function(){this._sceneScale={x:this._sceneScaleX,y:this._sceneScaleY,z:this._sceneScaleZ}}},sceneScaleX:{get:function(){return this._sceneScaleX},set:function(e){"object"!=typeof e||"undefined"==typeof e.numerator||"undefined"==typeof e.denominator||isNaN(e.numerator)||isNaN(e.denominator)||0===e.denominator||(this._sceneScaleX=e,this._updateSceneScale(),this.needsDraw=!0,this._needsComputeVisibleRange=!0)}},sceneScaleY:{get:function(){return this._sceneScaleY},set:function(e){"object"!=typeof e||"undefined"==typeof e.numerator||"undefined"==typeof e.denominator||isNaN(e.numerator)||isNaN(e.denominator)||0===e.denominator||(this._sceneScaleY=e,this._updateSceneScale(),this.needsDraw=!0,this._needsComputeVisibleRange=!0)}},sceneScaleZ:{get:function(){return this._sceneScaleZ},set:function(e){"object"!=typeof e||"undefined"==typeof e.numerator||"undefined"==typeof e.denominator||isNaN(e.numerator)||isNaN(e.denominator)||0===e.denominator||(this._sceneScaleZ=e,this._updateSceneScale(),this.needsDraw=!0,this._needsComputeVisibleRange=!0)}},_stride:{value:0},stride:{get:function(){return this._stride},set:function(e){this._stride=e}},_scrollingTransitionDurationMiliseconds:{value:500},_scrollingTransitionDuration:{value:"500ms"},scrollingTransitionDuration:{get:function(){return this._scrollingTransitionDuration},set:function(e){var t,n,i=e+"";i.length,(n=r.exec(i))?t=+n[1]:(n=l.exec(i))?t=1e3*+n[1]:(t=+i,i+="ms"),isNaN(t)||this._scrollingTransitionDurationMiliseconds===t||(this._scrollingTransitionDurationMiliseconds=t,this._scrollingTransitionDuration=i)}},hasSelectedIndexScrolling:{value:!1},selectedIndexScrollingOffset:{value:0},_handleSelectedIndexesChange:{value:function(e,t,n){this.hasSelectedIndexScrolling&&e[0]&&this.startScrollingIndexToOffset(Math.floor(this.contentController.content.indexOf(e[0].object)/this._paths.length),this.selectedIndexScrollingOffset)}},_timingFunctions:{value:{ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]}},_scrollingTransitionTimingFunctionBezier:{value:[.25,.1,.25,1]},_scrollingTransitionTimingFunction:{value:"ease"},scrollingTransitionTimingFunction:{get:function(){return this._scrollingTransitionTimingFunction},set:function(e){var t,n,i=e+"";if(this._timingFunctions.hasOwnProperty(i))this._scrollingTransitionTimingFunction=i,this._scrollingTransitionTimingFunctionBezier=this._timingFunctions[i];else if("cubic-bezier("===i.substr(0,13)&&")"===i.substr(i.length-1,1)&&(t=i.substr(13,i.length-14).split(","),4===t.length)){for(n=0;n<4;n++)if(t[n]-=0,isNaN(t[n]))return;t[0]<0?t[0]=0:t[0]>1&&(t[0]=1),t[2]<0?t[2]=0:t[2]>1&&(t[2]=1),this._scrollingTransitionTimingFunction="cubic-bezier("+t+")",this._scrollingTransitionTimingFunctionBezier=t}}},_computeCssCubicBezierValue:{value:function(e,t){var n,i,s,o=.5,a=.25;for(s=0;s<20;s++)n=o*o,i=1-o,3*(i*i*o*t[0]+i*n*t[2])+n*o>e?o-=a:o+=a,a*=.5;return n=o*o,i=1-o,3*(i*i*o*t[1]+i*n*t[3])+n*o}},_isTransitioningScroll:{value:!1},stopScrolling:{value:function(){this._isTransitioningScroll=!1}},startScrollingIndexToOffset:{value:function(e,t){this._scrollingOrigin=this.scroll,this._scrollingDestination=e-t,this._scrollingDestination>this._length?this._scrollingDestination=this._length:this._scrollingDestination<0&&(this._scrollingDestination=0),this._isScrolling=!0,this._scrollingStartTime=Date.now(),this._isTransitioningScroll=!0,this.needsDraw=!0,this.callDelegateMethod("didTranslateStart",this)}},_isCameraUpdated:{value:!0},_width:{value:0},_height:{value:0},_boundingBoxSize:{value:null},boundingBoxSize:{serializable:!0,get:function(){return this._boundingBoxSize},set:function(e){this._boundingBoxSize=e,this.elementsBoundingSphereRadius=.5*Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),this._needsComputeVisibleRange=!0}},_elementsBoundingSphereRadius:{value:1},elementsBoundingSphereRadius:{get:function(){return this._elementsBoundingSphereRadius},set:function(e){this._elementsBoundingSphereRadius!==e&&(this._elementsBoundingSphereRadius=e,this.needsDraw=!0,this._needsComputeVisibleRange=!0)}},_halfPI:{value:.5*Math.PI},_doublePI:{value:2*Math.PI},_computeFrustumNormals:{value:function(){var e,t,n,i,s,o,a,r,l,h=.5*this._viewpointFov*this._doublePI/360,d=Math.sin(h),u=Math.cos(h),c=d*this._width/this._height,m=this._viewpointPosition,p=this._viewpointTargetPoint,_=p[0]-m[0],v=p[1]-m[1],g=p[2]-m[2],f=this._halfPI-Math.atan2(g,_),w=_*Math.sin(f)+g*Math.cos(f),b=this._halfPI-Math.atan2(w,v),C=[[u,0,c],[-u,0,c],[0,u,d],[0,-u,d]],P=[];for(l=0;l<4;l++)r=C[l],e=r[0],t=r[1]*Math.cos(-b)-r[2]*Math.sin(-b),n=r[1]*Math.sin(-b)+r[2]*Math.cos(-b),i=e*Math.cos(-f)-n*Math.sin(-f),s=t,o=e*Math.sin(-f)+n*Math.cos(-f),a=1/Math.sqrt(i*i+s*s+o*o),P.push([i*a,s*a,o*a]);return P}},_segmentsIntersection:{value:function(e,t){for(var n,i,s=0,o=0,a=[];s<e.length&&o<t.length;)e[s][0]>=t[o][1]?o++:e[s][1]<=t[o][0]?s++:(n=e[s][0]>=t[o][0]?e[s][0]:t[o][0],i=e[s][1]<=t[o][1]?e[s][1]:t[o][1],a.push([n,i]),e[s][1]<t[o][1]?s++:e[s][1]>t[o][1]?o++:(s++,o++));return a}},_computeVisibleRange:{value:function(e){var t,n,i,s,o=e._knots.length-1,a=this._viewpointPosition,r=a[0],l=a[1],h=a[2],d=this._computeFrustumNormals(),u=[],c=[],m=[],p=this._elementsBoundingSphereRadius,_=e.getScaledKnots(this._sceneScale),v=e.getScaledNextHandlers(this._sceneScale),g=e.getScaledPreviousHandlers(this._sceneScale),f=[];for(i=0;i<o;i++)if(t=d[0],u=e.directedPlaneBezierIntersection(r-t[0]*p,l-t[1]*p,h-t[2]*p,d[0],_[i],v[i],g[i+1],_[i+1]),u.length&&(t=d[1],c=e.directedPlaneBezierIntersection(r-t[0]*p,l-t[1]*p,h-t[2]*p,d[1],_[i],v[i],g[i+1],_[i+1]),c.length&&(n=this._segmentsIntersection(u,c),n.length&&(t=d[2],u=e.directedPlaneBezierIntersection(r-t[0]*p,l-t[1]*p,h-t[2]*p,d[2],_[i],v[i],g[i+1],_[i+1]),n=this._segmentsIntersection(u,n),n.length))))for(t=d[3],u=e.directedPlaneBezierIntersection(r-t[0]*p,l-t[1]*p,h-t[2]*p,d[3],_[i],v[i],g[i+1],_[i+1]),n=this._segmentsIntersection(u,n),s=0;s<n.length;s++)m.push([i,n[s][0],n[s][1]]);var w,b,C,P,S,E,T,I=e._densities;for(i=0;i<m.length;i++)w=I[m[i][0]],b=I[m[i][0]+1],C=m[i][0]?e._densitySummation[m[i][0]-1]:0,P=m[i][1],S=m[i][2],E=(b-w)*P*P*.5+P*w+C,T=(b-w)*S*S*.5+S*w+C,f.push([E,T]);return f}},_determineCssPrefixedProperties:{value:function(){"webkitTransform"in this.element.style?(this._transform="webkitTransform",this._transformCss="-webkit-transform",this._transformPerspective="webkitPerspective"):"MozTransform"in this.element.style?(this._transform="MozTransform",this._transformCss="-moz-transform",this._transformPerspective="MozPerspective"):"msTransform"in this.element.style?(this._transform="msTransform",this._transformCss="-ms-transform",this._transformPerspective="msPerspective"):(this._transform="transform",this._transformPerspective="perspective")}},_isListeningToResize:{value:!0},isListeningToResize:{get:function(){return this._isListeningToResize},set:function(e){var t=!!e;this._isListeningToResize!==t&&(this._isListeningToResize=t,this._isListeningToResize?window.addEventListener("resize",this,!1):window.removeEventListener("resize",this,!1))}},_needsClearVisibleIndexes:{value:!1},handleResize:{value:function(){this._isCameraUpdated=!0,this._needsComputeVisibleRange=!0,this.needsDraw=!0,this._needsClearVisibleIndexes=!0}},enterDocument:{value:function(e){e&&(this._determineCssPrefixedProperties(),this._repetition.addRangeAtPathChangeListener("selectedIterations",this,"_handleSelectedIndexesChange"))}},_updateVisibleIndexes:{value:function(e,t){var n,i,s,o=this._visibleIndexes,a=o&&!isNaN(o.length)?o.length:0;for(this._needsClearVisibleIndexes&&(this._visibleIndexes.splice(e.length,1/0),this._needsClearVisibleIndexes=!1),s=0;s<a;s++)"number"==typeof t[o[s]]?e[t[o[s]]]=null:(n||(n=[])).push(s);if(n)for(s=i=0;i<n.length&&s<e.length;s++)null!==e[s]&&(o.set(n[i],e[s]),i++);for(i=a;s<e.length;s++)null!==e[s]&&(o.set(i,e[s]),i++)}},_needsComputeVisibleRange:{value:!0},_previousVisibleRanges:{value:null},viewportWidth:{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this._needsComputeVisibleRange=!0)}},viewportHeight:{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this._needsComputeVisibleRange=!0)}},_firstIterationWidth:{value:1},_firstIterationHeight:{value:1},firstIterationWidth:{get:function(){return this._firstIterationWidth},set:function(e){e!==this._firstIterationWidth&&(this._firstIterationWidth=e,this._needsComputeVisibleRange=!0,this._needsClearVisibleIndexes=!0)}},firstIterationHeight:{get:function(){return this._firstIterationHeight},set:function(e){e!==this._firstIterationHeight&&(this._firstIterationHeight=e,this._needsComputeVisibleRange=!0,this._needsClearVisibleIndexes=!0)}},_firstIterationOffsetLeft:{value:0},_firstIterationOffsetTop:{value:0},willDraw:{value:function(e){var t,n,i,s,o,a,r,l,h,d,u,c,m=this._newVisibleIndexes,p={},_=this._paths,v=_.length,g=this.splinePaths;if(this.viewportWidth=this._element.clientWidth,this.viewportHeight=this._element.clientHeight,this.__firstIteration){var f=this.__firstIteration.firstElement.children[0];if(0!==f.offsetWidth&&0!==f.offsetHeight&&(this.firstIterationWidth=f.offsetWidth,this.firstIterationHeight=f.offsetHeight,this._firstIterationOffsetLeft=f.offsetLeft,this._firstIterationOffsetTop=f.offsetTop,!this._boundingBoxSize)){var w=Math.max(Math.abs(this._firstIterationWidth+this._firstIterationOffsetLeft),Math.abs(this._firstIterationOffsetLeft)),b=Math.max(Math.abs(this._firstIterationHeight+this._firstIterationOffsetTop),Math.abs(this._firstIterationOffsetTop));this._elementsBoundingSphereRadius=Math.sqrt(w*w+b*b)}}this._isTransitioningScroll&&(u=(Date.now()-this._scrollingStartTime)/this._scrollingTransitionDurationMiliseconds,c=this._computeCssCubicBezierValue(u,this._scrollingTransitionTimingFunctionBezier),u<1?this.scroll=this._scrollingOrigin+(this._scrollingDestination-this._scrollingOrigin)*c:(this.scroll=this._scrollingDestination,this._isTransitioningScroll=!1,this._needsToCallDidTranslateEndDelegate=!0)),u=e,d=6;var C,P,S,E,T,I=this.lastDrawTime?.018*(u-this.lastDrawTime)*this._elasticScrollingSpeed:0,x=1-I/d,y=this._minSlideOffsetIndex,M=this._maxSlideOffsetIndex;if(this.lastDrawTime=u,this._hasElasticScrolling)for(o=0;o<d;o++){for(i=this._draggedSlideIndex-1;i>=y;i--)C=this._getSlideOffset(i),P=this._getSlideOffset(i+1),S=(C-P)*x+P,S>0&&(S=0),this._updateSlideOffset(i,S);for(i=this._draggedSlideIndex+1;i<=M;i++)C=this._getSlideOffset(i),P=this._getSlideOffset(i-1),S=(C-P)*x+P,S<0&&(S=0),this._updateSlideOffset(i,S)}if(g.length){for(l=this._numberOfIterations%v,h=(this._numberOfIterations-l)/v,this._needsComputeVisibleRange&&(this._previousVisibleRanges=[]),a=0;a<v;a++)for(d=h+(a<l?1:0),this._needsComputeVisibleRange?(t=this._computeVisibleRange(g[a]),this._previousVisibleRanges[a]=t,g[a]._computeDensitySummation()):t=this._previousVisibleRanges[a],r=this._scroll-_[a].headOffset,i=0,s=t.length;i<s;i++){for(T=d/2,o=T;T>=1;)n=(0|o)*v+a,E=(0|o)+this._getSlideOffset(n)-r,T/=2,E>=t[i][0]?o-=T:o+=T;o=o-1|0,o<0&&(o=0);do n=o*v+a,E=o+this._getSlideOffset(n)-r,E>=t[i][0]&&E<=t[i][1]&&void 0===p[n]&&(p[n]=m.length,m[m.length]=n),o++;while(E<=t[i][1]&&o<d)}this._needsComputeVisibleRange=!1}this._updateVisibleIndexes(m,p),m.length=0}},draw:{value:function(e){var t,n,i,s,o,a,r,l,h,d,u,c=this._repetition._drawnIterations.length,m=this._visibleIndexes,p=this._viewpointPosition,_=this._viewpointTargetPoint,v=this._splinePaths;if(this._isTransitioningScroll&&(this.needsDraw=!0),this._isCameraUpdated){if(this._isCameraEnabled){a=Math.tan((90-.5*this._viewpointFov)*this._doublePI/360)*this._height*.5;var g,f,w=_[0]-p[0],b=_[1]-p[1],C=_[2]-p[2],P=Math.atan2(-w,-C);g=w*-Math.sin(-P)+C*Math.cos(-P),f=Math.atan2(-b,-g),this._element.style[this._transformPerspective]=a+"px",u="translate3d(0,0,",u+=a,u+="px)rotateX(",u+=f,u+="rad)rotateY(",u+=-P,u+="rad)",u+="translate3d(",u+=-p[0],u+="px,",u+=-p[1],u+="px,",u+=-p[2],u+="px)",this._cameraElement.style[this._transform]=u,this._element.classList.remove("camera-disabled")}else this._element.style[this._transformPerspective]=this._perspective+"px",u="translate3d(",u+=.5*this._width-p[0],u+="px, ",u+=.5*this._height-p[1],u+="px,0)",this._cameraElement.style[this._transform]=u,this._element.classList.add("camera-disabled");this._isCameraUpdated=!1}if(v.length)for(t=0;t<c;t++)h=this.offset(m[t]),d=v[h.pathIndex],r=d._convertSplineTimeToBezierIndexTime(h.slideTime),n=this._repetition._drawnIterations[t],i=n.cachedFirstElement||n.firstElement,null!==r?((s=i.children[0])&&(i.classList.contains("selected")?s.classList.add("selected"):s.classList.remove("selected"),i.classList.contains("active")?s.classList.add("active"):s.classList.remove("active")),o=d.getPositionAtIndexTime(r,this._sceneScale),l=d.getRotationAtIndexTime(r),u=this._transformCss,u+=":translate3d(",u+=1e-5*(1e5*o[0]>>0),u+="px,",u+=1e-5*(1e5*o[1]>>0),u+="px,",u+=1e-5*(1e5*o[2]>>0),u+="px)",u+=l[2]?"rotateZ("+1e-5*(1e5*l[2]>>0)+"rad)":"",u+=l[1]?"rotateY("+1e-5*(1e5*l[1]>>0)+"rad)":"",u+=l[0]?"rotateX("+1e-5*(1e5*l[0]>>0)+"rad)":"",u+=";",u+=d.getStyleAtIndexTime(r),i.setAttribute("style",u)):i.setAttribute("style","display:none");else for(t=0;t<c;t++)n=this._repetition._drawnIterations[t],i=n.cachedFirstElement||n.firstElement,i.setAttribute("style","display:none");this._slideOffsetsLength&&(this.needsDraw=!0),this._needsToCallDidTranslateEndDelegate&&(this._needsToCallDidTranslateEndDelegate=!1,this.callDelegateMethod("didTranslateEnd",this))}},didDraw:{value:function(){this.viewportHeight&&this.viewportWidth||(this.needsDraw=!0)}},_updateLength:{value:function(){if(this._paths){var e,t,n,i,s,o,a=this._paths.length,r=0;if(a>0){for(s=this._numberOfIterations%a,i=(this._numberOfIterations-s)/a,o=0;o<a;o++)e=this._paths[o],t=i+(o<s?1:0),n=t-e.tailOffset+e.headOffset-1,n>r&&(r=n);this.length=r}this.needsDraw=!0}}},_numberOfIterations:{value:0},handle_numberOfIterationsChange:{value:function(){this._updateLength()}},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new a).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selectedIndexes:{serializable:!1,value:null},activeIndexes:{serializable:!1,value:null},observeProperty:{value:function(e,t,n){return s(this,e,t,n)}},templateDidLoad:{value:function(){var e=this;this._repetition.willDraw=function(){e.needsDraw=!0}}},_length:{value:0},length:{get:function(){return this._length},set:function(e){e<0?this._length=0:this._length=e}},_scroll:{value:0},_elasticScrollingRange:{value:20},_hasElasticScrolling:{value:!1},hasElasticScrolling:{get:function(){return this._hasElasticScrolling},set:function(e){e?this._hasElasticScrolling=!0:this._hasElasticScrolling=!1}},_slideOffsets:{value:null},_slideOffsetsLength:{value:0},_maxSlideOffsetIndex:{value:-1},_minSlideOffsetIndex:{value:2e9},_updateSlideOffset:{value:function(e,t){var n=1e-4;e>=0&&(t<-n||t>n?("undefined"==typeof this._slideOffsets[e]&&(this._slideOffsetsLength++,e<this._minSlideOffsetIndex&&(this._minSlideOffsetIndex=e),e>this._maxSlideOffsetIndex&&(this._maxSlideOffsetIndex=e)),this._slideOffsets[e]=t):this._removeSlideOffset(e))}},_incrementSlideOffset:{value:function(e,t){this._updateSlideOffset(e,this._getSlideOffset(e)+t)}},_removeSlideOffset:{value:function(e){if("undefined"!=typeof this._slideOffsets[e]){var t,n,i,s;if(delete this._slideOffsets[e],this._slideOffsetsLength--,e===this._minSlideOffsetIndex)for(t=Object.keys(this._slideOffsets),this._minSlideOffsetIndex=2e9,n=0,s=t.length;n<s;n++)i=0|t[n],i<this._minSlideOffsetIndex&&(this._minSlideOffsetIndex=i);if(e===this._maxSlideOffsetIndex)for("undefined"==typeof t&&(t=Object.keys(this._slideOffsets),s=t.length),this._maxSlideOffsetIndex=-1,n=0;n<s;n++)i=0|t[n],i>this._maxSlideOffsetIndex&&(this._maxSlideOffsetIndex=i)}}},_getSlideOffset:{value:function(e){return e<this._minSlideOffsetIndex?e=this._minSlideOffsetIndex>this._draggedSlideIndex?this._draggedSlideIndex:this._minSlideOffsetIndex:e>this._maxSlideOffsetIndex&&(e=this._maxSlideOffsetIndex<this._draggedSlideIndex?this._draggedSlideIndex:this._maxSlideOffsetIndex),"undefined"!=typeof this._slideOffsets[e]?this._slideOffsets[e]:0}},scroll:{get:function(){return this._scroll},set:function(e){if(e<0&&(e=0),e>this.length&&(e=this.length),this._hasElasticScrolling&&null!==this._draggedSlideIndex){var t,n,i=this._draggedSlideIndex-this._elasticScrollingRange,s=this._draggedSlideIndex+this._elasticScrollingRange;for(i>this._minSlideOffsetIndex&&(i=this._minSlideOffsetIndex),s<this._maxSlideOffsetIndex&&(s=this._maxSlideOffsetIndex),n=e-this._scroll,i<0&&(i=0),t=i;t<=s;t++)t!==this._draggedSlideIndex?this._incrementSlideOffset(t,n):this._removeSlideOffset(t);this._scroll=e}else this._scroll=e;this.needsDraw=!0}},previousStride:{value:function(){var e=Math.round(this.scroll/this.stride),t=(e-1)*this.stride;this.startScrollingIndexToOffset(0,-t)}},nextStride:{value:function(){var e=Math.round(this.scroll/this.stride),t=(e+1)*this.stride;this.startScrollingIndexToOffset(0,-t)}},_isInputEnabled:{value:!0},isInputEnabled:{get:function(){return this._isInputEnabled},set:function(e){e?this._isInputEnabled=!0:this._isInputEnabled=!1}},_draggedSlideIndex:{value:0},draggedSlideIndex:{get:function(){return this._draggedSlideIndex},set:function(e){if(e!==this._draggedSlideIndex){if(null!==e){var t,n=this._getSlideOffset(e),i=this._minSlideOffsetIndex,s=this._maxSlideOffsetIndex;for(this._incrementSlideOffset(this._draggedSlideIndex,-n),t=i;t<=s;t++)t!==this._draggedSlideIndex&&this._incrementSlideOffset(t,-n);this._removeSlideOffset(e),this._scroll-=n,this._flowTranslateComposer._scroll=this._scroll}this._draggedSlideIndex=e,this.needsDraw=!0}}},_elasticScrollingSpeed:{value:1},elasticScrollingSpeed:{get:function(){return this._elasticScrollingSpeed},set:function(e){this._elasticScrollingSpeed=parseFloat(e)}},lastDrawTime:{value:null},offset:{enumerable:!1,value:function(e){var t=this._paths.length,n=e%t,i=Math.floor(e/t)-this._scroll+this._paths[n].headOffset;return{pathIndex:n,slideTime:i+this._getSlideOffset(e)}}},serializeSelf:{value:function(e){e.setAllValues();for(var t,n=this.originalContent,i=0;t=n[i];i++)t.component&&e.addObject(t.component)}}});window.MontageElement&&MontageElement.define("montage-flow",h)}}),montageDefine("176abc9","ui/repetition.reel/repetition",{dependencies:["../../core/core","../component","../../core/range-controller","../../core/promise","../../composer/press-composer","collections/map","collections/set","collections/listen/property-changes","../../core/logger"],factory:function(e,t,n){var i=e("../../core/core").Montage,s=e("../component").Component,o=e("../../core/range-controller").RangeController,a=e("../../core/promise").Promise,r=e("../../composer/press-composer").PressComposer,l=e("collections/map"),h=e("collections/set"),d=e("collections/listen/property-changes"),u=e("../../core/logger").logger("repetition").color.magenta(),c=60,m=t.Iteration=i.specialize({repetition:{value:null},controller:{value:null},_object:{value:null},object:{get:function(){return this._object},set:function(e){if(this._object!==e){var t;this.dispatchBeforeOwnPropertyChange("object",this._object),this._object=e,t=this.repetition.contentController.selection.indexOf(e)!==-1,this._selected!==t&&(this.selected=t),this.dispatchOwnPropertyChange("object",e)}}},_fragment:{value:null},__childComponents:{value:null},_childComponents:{get:function(){return this.__childComponents},set:function(e){this.__childComponents!==e&&(this.dispatchBeforeOwnPropertyChange("_childComponents",this.__childComponents),this.__childComponents=e,this.dispatchOwnPropertyChange("_childComponents",e))}},_index:{value:null},index:{get:function(){return this._index},set:function(e){this._index!==e&&(this.dispatchBeforeOwnPropertyChange("index",this._index),this._index=e,this.dispatchOwnPropertyChange("index",e))}},_drawnIndex:{value:null},_active:{value:!1},active:{set:function(e){e=!!e,this.active!==e&&(this._active=e,this.repetition&&(e?this.repetition.activeIterations.add(this):this.repetition.activeIterations["delete"](this),this._updateRepetitionDirtyClassIteration()))},get:function(){return this._active}},__noTransition:{value:null},_noTransition:{get:function(){return this.__noTransition},set:function(e){this.__noTransition!==e&&(this.dispatchBeforeOwnPropertyChange("_noTransition",this.__noTransition),this.__noTransition=e,this.dispatchOwnPropertyChange("_noTransition",e))}},_templateDocumentPart:{value:null},isDirty:{value:!1},_selected:{value:!1},selected:{get:function(){return this._selected},set:function(e){e=!!e,this.object&&this.repetition&&this.repetition.contentController&&(e?this.repetition.contentController.selection.add(this.object):this.repetition.contentController.selection["delete"](this.object)),this._selected!==e&&(this.dispatchBeforeOwnPropertyChange("selected",this._selected),this._selected=e,this._updateRepetitionDirtyClassIteration(),this.dispatchOwnPropertyChange("selected",e))}},constructor:{value:function(){u.isDebug&&u.debug("Iteration constructor: create iteration %s",Object.hash(this)),this.repetition=null,this.controller=null,this.object=null,this._fragment=null,this._childComponents=null,this.index=null,this._drawnIndex=null,this._noTransition=!1,this.addOwnPropertyChangeListener("_noTransition",this),this.addPathChangeListener("index.defined() && _childComponents.defined()",this,"handleComponentModelChange"),this.cachedFirstElement=null}},_timeoutBecomeActiveID:{value:null},_shouldBecomeActive:{value:!1},shouldBecomeActive:{set:function(e){if(this._timeoutBecomeActiveID&&(clearTimeout(this._timeoutBecomeActiveID),this._timeoutBecomeActiveID=null),e){var t=this;this._shouldBecomeActive=!0,this._timeoutBecomeActiveID=setTimeout(function(){t._shouldBecomeActive&&(t.active=!0),t._shouldBecomeActive=!1},c)}else this._shouldBecomeActive=!1},get:function(){return this._shouldBecomeActive}},initWithRepetition:{value:function(e){return this.repetition=e,this}},recycle:{value:function(){this.index=null,this.object=null,this._noTransition=!0}},injectIntoDocument:{value:function(e){null!==this._drawnIndex?(u.isDebug&&u.debug("Iteration:%s retracting from index %s and injecting at %s",Object.hash(this),this._drawnIndex,e),this.retractFromDocument()):u.isDebug&&u.debug("Iteration:%s injecting at index %s",Object.hash(this),e);var t=this,n=this.repetition,i=n.element,s=n._boundaries,o=i.ownerDocument.createTextNode(""),a=s[e];if(s.splice(e,0,o),i.insertBefore(o,a),i.insertBefore(this._fragment,a),n._drawnIterations.splice(e,0,this),n._updateDrawnIndexes(e),n._addDirtyClassListIteration(this),!this._elementsWillBeAddedToMap){var r=this._childComponents.length,l=function(e){e.target.removeEventListener("firstDraw",l,!1),r--,r||t.forEachElement(function(e){n._iterationForElement.set(e,t)})};if(this._childComponents.length>0)for(var h=0;h<this._childComponents.length;h++){var d=this._childComponents[h];if(d.addEventListener("firstDraw",l,!1),d.needsDraw=!0,d._completedFirstDraw===!0)throw Error("Repetiton:%s child component %O has already drawn.",Object.hash(this),d)}else this.forEachElement(function(e){n._iterationForElement.set(e,t)});this._elementsWillBeAddedToMap=!0}}},_elementsWillBeAddedToMap:{value:!1},retractFromDocument:{value:function(){u.isDebug&&u.debug("Iteration:%s retractFromDocument drawnIndex: %s",Object.hash(this),this._drawnIndex);var e=this._drawnIndex,t=this.repetition,n=t.element,i=t._boundaries[e],s=t._boundaries[e+1];t._boundaries.splice(e,1);for(var o=this._fragment,a=i.nextSibling;a!==s;){var r=a.nextSibling;n.removeChild(a),o.appendChild(a),a=r}n.removeChild(i),this._drawnIndex=null,t._drawnIterations.splice(e,1),t._updateDrawnIndexes(e)}},handleComponentModelChange:{value:function(e){var t,n,i=this._childComponents,s=this.repetition;if(e)for(t=0,n=i.length;t<n;t++)s.addChildComponent(i[t]);else if(this._childComponents)for(t=0,n=i.length;t<n;t++)s.removeChildComponent(i[t])}},_updateRepetitionDirtyClassIteration:{value:function(){this.repetition&&(this.repetition._addDirtyClassListIteration(this),this.repetition.needsDraw=!0)}},forEachElement:{value:function(e,t){var n=this.repetition,i=this._drawnIndex;if(null!==i&&void 0!==i)for(var s=n._boundaries[i];s!==n._boundaries[i+1];s=s.nextSibling)1===s.nodeType&&e.call(t,s)}},firstElement:{get:function(){var e=this.repetition,t=this._drawnIndex;if(null!==t&&void 0!==t)for(var n=e._boundaries[t];n!==e._boundaries[t+1];n=n.nextSibling)if(1===n.nodeType)return this.cachedFirstElement=n,n}},isComponentTreeLoaded:{value:function(){return null!==this._fragment}},cachedFirstElement:{value:null},makePropertyObservable:{value:function(e){"object"!==e&&"_childComponents"!==e&&"index"!==e&&"_noTransition"!==e&&"selected"!==e&&d.prototype.makePropertyObservable.call(this,e)}}});m.prototype.handlePropertyChange=m.prototype._updateRepetitionDirtyClassIteration,t.Repetition=s.specialize({initWithContent:{value:function(e){return this.object=e,this}},initWithContentController:{value:function(e){return this.contentController=e,this}},content:{get:function(){return this.contentController?this.contentController.content:null},set:function(e){this.contentController.content=e}},_contentController:{value:null},contentController:{set:function(e){this._contentController!==e&&(this._contentController=e)},get:function(){
return this._contentController||(this._contentController=new o),this._contentController}},isSelectionEnabled:{value:null},allowsMultipleSelection:{set:function(e){e=!!e,this.contentController.allowsMultipleSelection!==e&&(this.contentController.allowsMultipleSelection=e),e&&!this.isSelectionEnabled&&(this.isSelectionEnabled=!0)},get:function(){return void 0!==this.contentController&&null!==this.contentController&&this.contentController.allowsMultipleSelection}},selectedIterations:{value:null},selectedIndexes:{value:null},activeIterations:{value:null},iterations:{value:null},hasTemplate:{value:!1},_iterationTemplate:{value:null},clonesChildComponents:{value:!0},__pressComposer:{value:null},_pressComposer:{get:function(){return this.__pressComposer||(this.__pressComposer=new r,this.__pressComposer.lazyLoad=!0,this.addComposerForElement(this.__pressComposer,this.element)),this.__pressComposer}},_cancelSelectionRangeChangeListener:{value:null},_selection:{value:null},selection:{get:function(){return this._selection},set:function(e){this.contentController?(this.contentController.selection!==e&&(this.contentController.selection=e),this._selection!==this.contentController.selection&&(this._selection=this.contentController.selection),this._cancelSelectionRangeChangeListener&&this._cancelSelectionRangeChangeListener(),e?(this._cancelSelectionRangeChangeListener=this.contentController.selection.addRangeChangeListener(this,"selection"),this.handleSelectionRangeChange(e,[])):this._cancelSelectionRangeChangeListener=null):this._selection=e}},handleSelectionRangeChange:{value:function(e,t){if(this.iterations){var n,i,s,o,a,r,h=this.iterations.length;if(e.length<=1&&t.length<=1){if(t.length)for(s=t[0],a=0;a<h;a++)this.iterations[a].object===s&&(this.iterations[a].selected=!1);if(e.length)for(s=e[0],a=0;a<h;a++)this.iterations[a].object===s&&(this.iterations[a].selected=!0)}else{for(n=new l,a=0;a<h;a++)o=this.iterations[a],s=o.object,(i=n.get(s))||(i=[],n.set(s,i)),i.push(o);for(a=0;a<t.length;a++)if(i=n.get(t[a]))for(r=0;r<i.length;r++)i[r].selected=!1;for(a=0;a<e.length;a++)if(i=n.get(e[a]))for(r=0;r<i.length;r++)i[r].selected=!0}}}},_visibleIndexes:{value:null},visibleIndexes:{get:function(){return this._visibleIndexes},set:function(e){this._visibleIndexes!==e&&(this._visibleIndexes&&this._visibleIndexes.removeRangeChangeListener&&this._visibleIndexes.removeRangeChangeListener(this,"visibleIndexes"),this._visibleIndexes=e,this._visibleIndexes&&this._visibleIndexes.addRangeChangeListener&&this._visibleIndexes.addRangeChangeListener(this,"visibleIndexes"),this._updateOrganizedContent())}},handleVisibleIndexesRangeChange:{value:function(e,t,n){var i,s;if(this.__controllerOrganizedContent){for(i=[],s=0;s<e.length;s++)i.push(this.__controllerOrganizedContent[e[s]]);this.organizedContent.swap(n,t.length,i),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(i.length,t.length,n),this.needsDraw=!0)}}},__controllerOrganizedContent:{value:null},_controllerOrganizedContent:{get:function(){return this.__controllerOrganizedContent},set:function(e){this.__controllerOrganizedContent!==e&&(this.__controllerOrganizedContent&&this.__controllerOrganizedContent.removeRangeChangeListener&&this.__controllerOrganizedContent.removeRangeChangeListener(this,"controllerOrganizedContent"),this.__controllerOrganizedContent=e,this.__controllerOrganizedContent&&this.__controllerOrganizedContent.addRangeChangeListener&&this.__controllerOrganizedContent.addRangeChangeListener(this,"controllerOrganizedContent"),this._updateOrganizedContent())}},handleControllerOrganizedContentRangeChange:{value:function(e,t,n){this._visibleIndexes?this._updateOrganizedContent():(this.organizedContent.swap(n,t.length,e),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(e.length,t.length,n),this.needsDraw=!0))}},_updateOrganizedContent:{value:function(){var e,t;if(this.__controllerOrganizedContent)if(this._visibleIndexes){for(this.organizedContent.length>this._visibleIndexes.length&&(this.organizedContent.length=this._visibleIndexes.length,this._isListeningToOrganizedContentChanges&&this.handleOrganizedContentRangeChange(0,this.organizedContent.length-this._visibleIndexes.length,this._visibleIndexes.length)),e=this.organizedContent.length,t=0;t<this._visibleIndexes.length;t++)this.organizedContent[t]!==this.__controllerOrganizedContent[this._visibleIndexes[t]]&&(this.organizedContent[t]=this.__controllerOrganizedContent[this._visibleIndexes[t]],this._isListeningToOrganizedContentChanges&&this.handleOrganizedContentRangeChange(1,e>t?1:0,t));this._isListeningToOrganizedContentChanges&&(this.needsDraw=!0)}else e=this.organizedContent.length,this.organizedContent.swap(0,e,this.__controllerOrganizedContent),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(this.__controllerOrganizedContent.length,e,0),this.needsDraw=!0);else e=this.organizedContent.length,this.organizedContent=[],this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(0,e,0),this.needsDraw=!0)}},constructor:{value:function(){this.contentController=null,this.organizedContent=[],this.defineBinding("_controllerOrganizedContent",{"<-":"contentController.organizedContent"}),this.isSelectionEnabled=!1,this.defineBinding("selection",{"<-":"contentController.selection"}),this.defineBinding("selectedIterations",{"<-":"iterations.filter{selected}"}),this.defineBinding("selectedIndexes",{"<-":"selectedIterations.map{index}"}),this._iterationTemplate=null,this.addPathChangeListener(this._setupRequirements,this,"_handleSetupRequirementsChange"),this.addPathChangeListener("innerTemplate",this,"_handleInnerTemplateChange"),this.addPathChangeListener("contentController.allowsMultipleSelection",this,"_handleContentControllerAllowsMultipleSelectionChange"),this.iterations=[],this._drawnIterations=[],this._freeIterations=[],this._iterationForElement=new l,this._iterationCreationPromise=a.resolve(),this._boundaries=[],this._dirtyClassListIterations=new h,this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._initialContentDrawn=!1,this.addOwnPropertyChangeListener("isSelectionEnabled",this),this._selectionPointer=null,this.activeIterations=[]}},_setupRequirements:{value:"[!_iterationTemplate.defined(),!_newDomContent.defined(),!_shouldClearDomContentOnNextDraw,_isComponentExpanded,_ownerDocumentPart.defined()].every{}"},_handleContentControllerAllowsMultipleSelectionChange:{value:function(e){this.allowsMultipleSelection!==e&&(this.allowsMultipleSelection=e)}},_handleSetupRequirementsChange:{value:function(e){e&&this._setupIterationTemplate()}},_handleInnerTemplateChange:{value:function(e){this._iterationTemplate&&this._teardownIterationTemplate(),e&&this.getPath(this._setupRequirements)&&this._setupIterationTemplate()}},cleanupDeletedComponentTree:{value:function(e){var t=this._innerTemplate;this._innerTemplate=null,t&&this._teardownIterationTemplate(),e&&this.cancelBindings()}},expandComponent:{value:function(){return this._isComponentExpanded=!0,a.resolve()}},_buildIterationTemplate:{value:function(){var e,t,n,s;return e=this.innerTemplate.clone(),t=e.getSerialization(),n=t.getSerializationObject(),s=i.getInfoForObject(this).label,this._iterationLabel=s+":iteration",n[this._iterationLabel]={},e.setObjects(n),this.innerTemplate.hasParameters()&&this._expandIterationTemplateParameters(e),window._montage_le_flag&&(e.refresher=this,this._leTagIterationTemplate(e)),e}},_rebuildIterationTemplate:{value:function(){var e,t=this._iterationTemplate,n=this.iterations;this._purgeFreeIterations();for(var i,s=0;i=n[s];s++)i.isDirty=!0;this._innerTemplate=null,e=this._buildIterationTemplate(),t.replaceContentsWithTemplate(e)}},refreshTemplate:{value:function(){this._rebuildIterationTemplate()}},_isListeningToOrganizedContentChanges:{value:!1},_setupIterationTemplate:{value:function(){this._iterationTemplate=this._buildIterationTemplate();for(var e,t=this.childComponents,n=t.length-1;e=t[n--];)e.detachFromParentComponent(),e.needsDraw=!1,e.cleanupDeletedComponentTree(!0);this.handleOrganizedContentRangeChange(this.organizedContent.length,0,0),this._isListeningToOrganizedContentChanges=!0,this._canDrawInitialContent=!0,this.needsDraw=!0}},_leTagIterationTemplate:{value:function(e){var t=e.document.body;if(t.children.length>0){var n=this.ownerComponent._montage_metadata.moduleId,i=this._montage_metadata.label;this._leTagStarArgument(n,i,t)}}},_teardownIterationTemplate:{value:function(){this._isListeningToOrganizedContentChanges=!1,this.handleOrganizedContentRangeChange(0,this.organizedContent.length,0),this._purgeFreeIterations(),this._iterationTemplate=null,this._iterationForElement.clear(),this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._selectionPointer=null,this.activeIterations.clear(),this._dirtyClassListIterations.clear()}},_purgeFreeIterations:{value:function(){for(var e=0;e<this._freeIterations.length;e++)for(var t=this._freeIterations[e],n=0;n<t._childComponents.length;n++){var i=t._childComponents[n];this.removeChildComponent(i),i.cleanupDeletedComponentTree(!0)}this._freeIterations.clear()}},_expandIterationTemplateParameters:{value:function(e){for(var t,n,i,s,o,a,r,l,h,d=this;e.hasParameters();){d=d.ownerComponent,t=d._ownerDocumentPart.template,s=d._ownerDocumentPart.objects,a=e.expandParameters(d),i=e.getSerialization().getExternalObjectLabels(),o=e.getInstances(),l=a.labels,n=a.labelsCollisions;for(var u,c=0;u=l[c];c++)r=n&&u in n?n[u]:u,i.indexOf(r)>=0?o[r]=s[u]:(h=t.getObjectMetadata(u),h.owner||(h.owner=s.owner),e.setObjectMetadata(r,h.require,h.label,h.owner))}}},_iterationLabel:{value:null},_iterationCreationPromise:{value:null},_createIteration:{value:function(){var e=this,t=(new this.Iteration).initWithRepetition(this);return this._iterationCreationPromise=this._iterationCreationPromise.then(function(){var n,i,s=e.element.ownerDocument;return n=e._iterationTemplate.getInstances(),n=Object.create(n),n[e._iterationLabel]=t,i=e._iterationTemplate.instantiateWithInstances(n,s).then(function(n){return n.parentDocumentPart=e._ownerDocumentPart,t._templateDocumentPart=n,n.loadComponentTree().then(function(){u.isDebug&&u.debug("Iteration:%s component tree loaded.",Object.hash(t)),t._fragment=n.fragment,t._childComponents=n.childComponents,e.constructIteration(t)}),t}),i.then(null,function(e){console.error(e)})}),this._requestedIterations++,t}},constructIteration:{value:function(e){this._createdIterations++,this._createdIterations>=this._requestedIterations&&(this.needsDraw=!0,this._canDraw=!0)}},_controllerIterations:{value:null},_drawnIterations:{value:null},_freeIterations:{value:null},handleOrganizedContentRangeChange:{value:function(e,t,n){var i,s,o,a,r,l=n,h=this.iterations,d=Math.min(e,t),c=t-d,m=e-d,p=this.organizedContent;for(u.isDebug&&(u.debug("Repetition:%s content changed +%s@%s %O -%s %O ",Object.hash(this),e?e:0,n,t?t:0),u.debug("Repetition:%s +%s -%s iterations",Object.hash(this),m,c)),this._iterationTemplate.isDirty&&this._iterationTemplate.refresh(),a=0;a<d;a++,n++)h[n].object=p[n];if(c>0)for(i=h.splice(n,c),a=0;a<c;a++)s=i[a],s.recycle(),s.isDirty||this._freeIterations.push(s);if(u.isDebug&&(o=[]),m>0){for(;this._freeIterations.length<m;)this._freeIterations.push(this._createIteration()),u.isDebug&&o.push(this._freeIterations[this._freeIterations.length-1]);var _=new Array(m);for(a=d,r=0;a<e;a++,r++){var v=this._freeIterations.pop();u.isDebug&&(o.has(v)||u.debug("Repetition:%s reusing %s",Object.hash(this),Object.hash(v))),v.object=p[l+a],u.isDebug&&u.debug("Repetition:%s Iteration:%s object set to: %",Object.hash(this),Object.hash(v),v.object),_[r]=v}h.swap(n,0,_)}(c>0||m>0)&&this._updateIndexes(n)}},_updateIndexes:{value:function(e){for(var t=this.iterations,n=e;n<t.length;n++)t[n].index=n}},_addDirtyClassListIteration:{value:function(e){e.forEachElement(function(t){var n;t&&(n=t.component)?(n.classList[e.active?"add":"remove"]("active"),n.classList[e.selected?"add":"remove"]("selected"),n.classList.remove("no-transition")):this._dirtyClassListIterations.add(e)},this)}},canDraw:{value:function(){var e=this.canDrawGate.value;return e=e&&this._requestedIterations<=this._createdIterations,e=e&&(this._initialContentDrawn||this._canDrawInitialContent)}},_boundaries:{value:null},_dirtyClassListIterations:{value:null},_requestedIterations:{value:null},_createdIterations:{value:null},_canDrawInitialContent:{value:null},_initialContentDrawn:{value:null},draw:{value:function(){var e;for(this._initialContentDrawn||(this._drawInitialContent(),this._initialContentDrawn=!0),e=this._drawnIterations.length-1;e>=0;e--)null===this._drawnIterations[e].index&&this._drawnIterations[e].retractFromDocument();for(e=0;e<this.iterations.length;e++){var t=this.iterations[e];t._drawnIndex!==t.index&&t.isComponentTreeLoaded()&&t.injectIntoDocument(e)}var n=this._dirtyClassListIterations.toArray();this._dirtyClassListIterations.clear(),n.forEach(function(e){e.isComponentTreeLoaded()&&e.forEachElement(function(t){t.component||(t.classList[e.active?"add":"remove"]("active"),t.classList[e.selected?"add":"remove"]("selected"),t.classList.remove("no-transition"))},this)},this)}},_drawInitialContent:{value:function(){for(var e=this.element,t=e.childNodes.length,n=0;n<t;n++)e.removeChild(e.firstChild);var i=e.ownerDocument.createTextNode("");e.appendChild(i),this._boundaries.push(i)}},_updateDrawnIndexes:{value:function(e){for(var t=this._drawnIterations;e<t.length;e++)t[e]._drawnIndex=e}},_selectionPointer:{value:null},_startX:{value:0},_startY:{value:0},_currentActiveIteration:{value:null},handleIsSelectionEnabledChange:{value:function(e){e?this._enableSelectionTracking():(this.selection.clear(),this._disableSelectionTracking())}},_enableSelectionTracking:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1)}},_disableSelectionTracking:{value:function(){this._pressComposer.removeEventListener("pressStart",this,!1)}},handlePressStart:{value:function(e){var t=this._findIterationContainingElement(e.targetElement);t&&(this._startX=e.clientX,this._startY=e.clientY,this.__pressComposer.addEventListener("press",this,!1),this.__pressComposer.addEventListener("pressCancel",this,!1),t.shouldBecomeActive=!0,this._currentActiveIteration=t)}},_ignoreSelection:{value:function(){this._currentActiveIteration&&(this._currentActiveIteration.shouldBecomeActive=!1,this._currentActiveIteration.active=!1,this._currentActiveIteration=null),this.activeIterations.clear(),this._startX=0,this._startY=0,this.__pressComposer.removeEventListener("press",this,!1),this.__pressComposer.removeEventListener("pressCancel",this,!1)}},handlePressCancel:{value:function(){this._ignoreSelection()}},handlePress:{value:function(e){var t=this._findIterationContainingElement(e.targetElement);t&&this._currentActiveIteration===t&&(t.active=!1,t.selected?this.allowsMultipleSelection&&(t.selected=!1):t.selected=!0),this._ignoreSelection()}},_findIterationContainingElement:{value:function(e){for(var t;e;){if(e===this.element)return this._iterationForElement.get(t);t=e,e=e.parentNode}}},Iteration:{value:m,serializable:!1}})}}),montageDefine("176abc9","composer/translate-composer",{dependencies:["./composer","../core/event/event-manager"],factory:function(e,t,n){var i=e("./composer").Composer,s=e("../core/event/event-manager").defaultEventManager,o=t.TranslateComposer=i.specialize({_NATIVE_ELEMENTS:{value:["A","IFRAME","EMBED","OBJECT","VIDEO","AUDIO","CANVAS","LABEL","INPUT","BUTTON","SELECT","TEXTAREA","KEYGEN","DETAILS","COMMAND"]},_WHEEL_POINTER:{value:"wheel",writable:!1},_MOUSE_POINTER:{value:"mouse",writable:!1},_TOUCH_POINTER:{value:"touch",writable:!1},CLAIM_POINTER_POLICIES:{value:{DEFAULT:"default",MOVE:"move"}},enabled:{value:!0},_externalUpdate:{value:!0},isAnimating:{value:!1},isMoving:{value:!1},frame:{value:function(){this.isAnimating&&this._animationInterval(),this._externalUpdate=!1}},_pointerSpeedMultiplier:{value:1},pointerSpeedMultiplier:{get:function(){return this._pointerSpeedMultiplier},set:function(e){this._pointerSpeedMultiplier=e}},pointerStartEventPosition:{value:null},shouldCancelOnSroll:{value:!0},_shouldDispatchTranslate:{value:!1},_isSelfUpdate:{value:!1},_allowFloats:{value:!0},allowFloats:{get:function(){return this._allowFloats},set:function(e){this._allowFloats!==e&&(this._allowFloats=e,this.translateX=this._translateX,this.translateY=this._translateY)}},allowTranslateOuterExtreme:{value:!1},_translateX:{value:0},translateX:{get:function(){return this._translateX},set:function(e){if("vertical"===this._axis)this._translateX=this._minTranslateX||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateX&&t<this._minTranslateX&&(t=this._minTranslateX),null!==this._maxTranslateX&&t>this._maxTranslateX&&(t=this._maxTranslateX),this._isSelfUpdate||(this.isAnimating=!1),this._translateX=t}}},_translateY:{value:0},translateY:{get:function(){return this._translateY},set:function(e){if("horizontal"===this._axis)this._translateY=this._minTranslateY||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateY&&t<this._minTranslateY&&(t=this._minTranslateY),null!==this._maxTranslateY&&t>this._maxTranslateY&&(t=this._maxTranslateY),this._isSelfUpdate||(this.isAnimating=!1),this._translateY=t}}},_minTranslateX:{value:null},minTranslateX:{get:function(){return this._minTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateX!==e&&(null!==e&&this._translateX<e&&(this.translateX=e),this._minTranslateX=e)}},_maxTranslateX:{value:null},maxTranslateX:{get:function(){return this._maxTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateX!==e&&(null!==e&&this._translateX>e&&(this.translateX=e),this._maxTranslateX=e)}},_minTranslateY:{value:null},minTranslateY:{get:function(){return this._minTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateY!==e&&(null!==e&&this._translateY<e&&(this.translateY=e),this._minTranslateY=e)}},_maxTranslateY:{value:null},maxTranslateY:{get:function(){return this._maxTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateY!==e&&(null!==e&&this._translateY>e&&(this.translateY=e),this._maxTranslateY=e)}},_axis:{value:"both"},axis:{get:function(){return this._axis},set:function(e){switch(e){case"vertical":case"horizontal":this._axis=e,this.translateX=this._translateX,this.translateY=this._translateY;break;default:this._axis="both"}}},invertAxis:{depends:["invertXAxis","invertYAxis"],get:function(){return this._invertXAxis===this._invertYAxis?this._invertXAxis:null},set:function(e){this.invertXAxis=e,this.invertYAxis=e}},_invertXAxis:{value:!1},invertXAxis:{get:function(){return this._invertXAxis},set:function(e){this._invertXAxis=!!e}},_invertYAxis:{value:!1},invertYAxis:{get:function(){return this._invertYAxis},set:function(e){this._invertYAxis=!!e}},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=!!e}},__momentumDuration:{value:650},_momentumDuration:{get:function(){return this.__momentumDuration},set:function(e){this.__momentumDuration=isNaN(e)?1:e>>0,this.__momentumDuration<1&&(this.__momentumDuration=1)}},_pointerX:{value:null},_pointerY:{value:null},_touchIdentifier:{value:null},_isFirstMove:{value:!1},_observedPointer:{value:null},eventManager:{get:function(){return s}},_mouseRadiusThreshold:{value:2},_touchRadiusThreshold:{value:8},_listenToWheelEvent:{value:!1},listenToWheelEvent:{set:function(e){e=!!e,this._listenToWheelEvent!==e&&(this._listenToWheelEvent=e,this._isLoaded&&(e?this._addWheelEventListener():this._removeWheelEventListener()))},get:function(){return this._listenToWheelEvent}},_claimPointerPolicy:{value:null},load:{value:function(){window.PointerEvent?(this._element.addEventListener("pointerdown",this,!0),this._element.style.touchAction="none"):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.addEventListener("MSPointerDown",this,!0):(this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("mousedown",this,!0)),this._listenToWheelEvent&&this._addWheelEventListener(),this.eventManager.isStoringPointerEvents=!0}},unload:{value:function(){window.PointerEvent?(this._element.removeEventListener("pointerdown",this,!0),this._element.style.touchAction="auto"):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.removeEventListener("MSPointerDown",this,!0):(this._element.removeEventListener("touchstart",this,!0),this._element.removeEventListener("mousedown",this,!0)),this._listenToWheelEvent&&this._removeWheelEventListener()}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("surrenderPointer",e,t);return("undefined"==typeof n||n!==!1)&&(this._cancel(),!0)}},addEventListener:{value:function(e,t,n){i.prototype.addEventListener.call(this,e,t,n),"translate"===e&&(this._shouldDispatchTranslate=!0)}},capturePointerdown:{value:function(e){e.pointerType===this._MOUSE_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?this.captureMousedown(e):(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.captureTouchstart(e)}},capturePointermove:{value:function(e){e.pointerType===this._MOUSE_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?this.captureMousemove(e):(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.captureTouchmove(e)}},handlePointerup:{value:function(e){e.pointerType===this._MOUSE_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?this.handleMouseup(e):(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.handleTouchend(e)}},handlePointercancel:{value:function(e){(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.handleTouchcancel(e)}},captureMousedown:{value:function(e){this.enabled&&0===e.button&&(this._observedPointer=this._MOUSE_POINTER,this._start(e.clientX,e.clientY,e.target,e.timeStamp))}},captureMousemove:{value:function(e){this.enabled&&this._handleMove(e)}},handleMouseup:{value:function(e){this.enabled&&this._end(e)}},captureTouchstart:{value:function(e){if(this.enabled&&null===this._observedPointer)if(void 0!==e.pointerId)this._observedPointer=e.pointerId,this._start(e.clientX,e.clientY,e.target,e.timeStamp),this._preventDefaultIfNeeded(e);else{var t=e.targetTouches;if(t&&1===t.length){var n=t[0];this._preventDefaultIfNeeded(e),this._observedPointer=n.identifier,this._start(n.clientX,n.clientY,n.target,e.timeStamp)}}}},captureTouchmove:{value:function(e){if(this.enabled)if(void 0!==e.pointerId)this._handleMove(e);else{var t=this._findObservedTouch(e.changedTouches);t&&this._handleMove(e,t)}}},handleTouchend:{value:function(e){if(this.enabled)if(void 0!==e.pointerId)this._end(e);else{var t=this._findObservedTouch(e.changedTouches);t&&this._end(t)}}},handleTouchcancel:{value:function(e){if(this.enabled)if(void 0!==e.pointerId)this._cancel(e);else{var t=this._findObservedTouch(e.changedTouches);t&&this._cancel(t)}}},captureScroll:{value:function(e){e.target.contains(this.element)&&this._cancel(e)}},_shouldPreventDefault:{value:function(e){return!s.isPassiveEventType(e.type)&&!!e.target.tagName&&this._NATIVE_ELEMENTS.indexOf(e.target.tagName)===-1&&!e.target.isContentEditable}},_preventDefaultIfNeeded:{value:function(e){!e.defaultPrevented&&this._shouldPreventDefault(e)&&e.preventDefault()}},_addWheelEventListener:{value:function(){if(this._element){var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";this._element.addEventListener(e,this,!1),this._element.addEventListener(e,this,!0)}}},_removeWheelEventListener:{value:function(){if(this._element){var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";this._element.removeEventListener(e,this,!1),this._element.removeEventListener(e,this,!0)}}},_start:{value:function(e,t,n,i){this.pointerStartEventPosition={pageX:e,pageY:t,target:n,timeStamp:i},this._pointerX=e,this._pointerY=t,window.PointerEvent?(this._element.addEventListener("pointerdown",this,!1),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!1),document.addEventListener("pointercancel",this,!1),this.shouldCancelOnSroll&&document.addEventListener("scroll",this,!0)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(this._element.addEventListener("MSPointerDown",this,!1),document.addEventListener("MSPointerMove",this,!0),document.addEventListener("MSPointerUp",this,!1),document.addEventListener("MSPointerCancel",this,!1),this.shouldCancelOnSroll&&document.addEventListener("scroll",this,!0)):this._observedPointer===this._MOUSE_POINTER?(this._element.addEventListener("mousedown",this,!1),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!1),this.shouldCancelOnSroll&&document.addEventListener("scroll",this,!0)):(this._element.addEventListener("touchstart",this,!1),this._element.addEventListener("touchmove",this,!0),this._element.addEventListener("touchend",this,!1),this._element.addEventListener("touchcancel",this,!1)),this.isAnimating&&(this.isAnimating=!1,this._dispatchTranslateEnd()),this._isFirstMove=!0}},_handleStart:{value:function(e){this._claimPointerPolicy=this.eventManager.componentClaimingPointer(this._observedPointer)?this.CLAIM_POINTER_POLICIES.MOVE:this.CLAIM_POINTER_POLICIES.DEFAULT}},_findObservedTouch:{value:function(e){for(var t,n=null,i=0;(t=e[i])&&null===n;i++)t.identifier===this._observedPointer&&(n=t);return n}},_handleMove:{value:function(e,t){var n=this.eventManager,s=this.pointerStartEventPosition;if(t||(t=e),this._isFirstMove){var o=n.componentClaimingPointer(this._observedPointer);if(o){var a=!0;if(this._claimPointerPolicy===this.CLAIM_POINTER_POLICIES.MOVE){var r=this._observedPointer===this._MOUSE_POINTER?this._mouseRadiusThreshold:this._touchRadiusThreshold,l=s.pageX-t.clientX,h=s.pageY-t.clientY;a=i.isCoordinateOutsideRadius(l,h,r),a&&(s.pageX=t.clientX,s.pageY=t.clientY,s.target=t.target,s.timeStamp=e.timeStamp,this._pointerX=t.clientX,this._pointerY=t.clientY)}if(!a)return void this._preventDefaultIfNeeded(e)}n.claimPointer(this._observedPointer,this)}n.isPointerClaimedByComponent(this._observedPointer,this)?(this._preventDefaultIfNeeded(e),(this.allowTranslateOuterExtreme||this._shouldMove(e,t.clientX,t.clientY))&&(this._isFirstMove?this._firstMove():this._move(t.clientX,t.clientY))):this._releaseInterest()}},_shouldMove:{value:function(e,t,n){var i,s,o,a,r=this._translateY,l=this._translateX,h=this._minTranslateY,d=this._maxTranslateY,u=this._minTranslateX,c=this._maxTranslateX,m=!0;return"wheel"===e.type||"mousewheel"===e.type?("vertical"!==this._axis&&(o=20*(e.wheelDeltaX||-e.deltaX||0)/120),"horizontal"!==this._axis&&(a=20*(e.wheelDeltaY||-e.deltaY||0)/120),m=!("horizontal"===this._axis&&0===o||"vertical"===this._axis&&0===a||0===o&&0===a)):("vertical"!==this._axis&&(o=-(this._invertXAxis?this._pointerX-t:t-this._pointerX)),"horizontal"!==this._axis&&(a=-(this._invertYAxis?this._pointerY-n:n-this._pointerY))),m&&(a&&(i=this._isNegativeNumber(a),null!==h&&(m=r!==h||r===h&&i),null!==d&&m&&(m=r!==d||r===d&&!i)),o&&(s=this._isNegativeNumber(o),null!==u&&m&&(m=l!==u||l===u&&s),null!==c&&m&&(m=l!==c||l===c&&!s))),m}},_firstMove:{value:function(){this._isFirstMove&&(this._dispatchTranslateStart(this._translateX,this._translateY),this._isFirstMove=!1,this.isMoving=!0)}},_move:{value:function(e,t){var n;this._isSelfUpdate=!0,"vertical"!==this._axis&&(n=this._invertXAxis?this._pointerX-e:e-this._pointerX,this.translateX+=n*this._pointerSpeedMultiplier),"horizontal"!==this._axis&&(n=this._invertYAxis?this._pointerY-t:t-this._pointerY,this.translateY+=n*this._pointerSpeedMultiplier),this._isSelfUpdate=!1,this._pointerX=e,this._pointerY=t,this._shouldDispatchTranslate&&this._dispatchTranslate()}},_end:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY;var t=e.velocity;this._hasMomentum&&(t.speed>40||this.translateStrideX||this.translateStrideY)?("vertical"!==this._axis?this.momentumX=t.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):this.momentumX=0,"horizontal"!==this._axis?this.momentumY=t.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):this.momentumY=0,this.endX=this.startX-this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY-this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateEnd()),this._releaseInterest()}},_cancel:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY,this.animateMomentum=!1,this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateCancel()),this._releaseInterest()}},_releaseInterest:{value:function(){window.PointerEvent?(this._element.removeEventListener("pointerdown",this,!1),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!1),document.removeEventListener("pointercancel",this,!1),this.shouldCancelOnSroll&&document.removeEventListener("scroll",this,!0)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(this._element.removeEventListener("MSPointerDown",this,!1),document.removeEventListener("MSPointerMove",this,!0),document.removeEventListener("MSPointerUp",this,!1),document.removeEventListener("MSPointerCancel",this,!1),this.shouldCancelOnSroll&&document.removeEventListener("scroll",this,!0)):this._observedPointer===this._MOUSE_POINTER?(this._element.removeEventListener("mousedown",this,!1),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!1),this.shouldCancelOnSroll&&document.removeEventListener("scroll",this,!0)):(this._element.removeEventListener("touchstart",this,!1),this._element.removeEventListener("touchmove",this,!0),this._element.removeEventListener("touchend",this,!1),this._element.removeEventListener("touchcancel",this,!1)),this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._isFirstMove=!1,this.isMoving=!1}},_isAxisMovement:{value:function(e){var t,n,i,s,o,a,r,l=e.velocity,h=.7853981633974483,d=2.356194490192345,u=-2.356194490192345,c=-.7853981633974483;if("both"===this.axis)return!0;if(!l||0===l.speed||isNaN(l.speed)?(a=this.pointerStartEventPosition.pageX-e.clientX,r=this.pointerStartEventPosition.pageY-e.clientY,o=Math.atan2(r,a)):o=l.angle,"horizontal"===this.axis){if(i=o<=h&&o>=c,s=o>=d||o<=u,i||s)return!0}else if("vertical"===this.axis&&(t=o<=c&&o>=u,n=o>=h&&o<=d,t||n))return!0;return!1}},_translateEndTimeout:{value:null},_handleWheelTimeout:{value:null},_isNegativeNumber:{value:function(e){return e=+e,isNaN(e)||(e=1/e),e<0}},captureWheel:{value:function(e){this._shouldMove(e)?this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)||this.eventManager.claimPointer(this._WHEEL_POINTER,this):this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)&&this.eventManager.forfeitPointer(this._WHEEL_POINTER,this)}},handleWheel:{value:function(e){if(this.enabled&&this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)){if(this._observedPointer=this._WHEEL_POINTER,this._translateEndTimeout?clearTimeout(this._translateEndTimeout):this._dispatchTranslateStart(),
"vertical"!==this.axis&&(this.translateX=this._translateX-20*(e.wheelDeltaX||-e.deltaX||0)/120),"horizontal"!==this.axis&&(this.translateY=this._translateY-20*(e.wheelDeltaY||-e.deltaY||0)/120),this.isMoving=!0,this._dispatchTranslate(),"function"!=typeof this._handleWheelTimeout){var t=function(){this._translateEndTimeout=null,this._dispatchTranslateEnd(),this.isMoving=!1,this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)&&this.eventManager.forfeitPointer(this._WHEEL_POINTER,this)};this._handleWheelTimeout=t.bind(this)}this._translateEndTimeout=setTimeout(this._handleWheelTimeout,400),e.preventDefault()}}},_bezierTValue:{value:function(e,t,n,i,s){var o,a,r,l,h=1-3*i+3*t,d=3*i-6*t,u=3*t,c=.5;for(a=0;a<10;a++)l=c*c,o=3*h*l+2*d*c+u,r=1-c,c-=(3*(r*r*c*t+r*l*i)+l*c-e)/o;return l=c*c,r=1-c,3*(r*r*c*n+r*l*s)+l*c}},_dispatchTranslateStart:{value:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent("translateStart",!0,!0,null),n.translateX=e,n.translateY=t,n.scroll=0,n.pointer=this._observedPointer,this.dispatchEvent(n)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslateCancel:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateCancel",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},animateBouncingX:{value:!1,enumerable:!1},startTimeBounceX:{value:!1,enumerable:!1},animateBouncingY:{value:!1,enumerable:!1},startTimeBounceY:{value:!1,enumerable:!1},animateMomentum:{value:!1,enumerable:!1},startTime:{value:null,enumerable:!1},startX:{value:null,enumerable:!1},posX:{value:null,enumerable:!1},endX:{value:null,enumerable:!1},startY:{value:null,enumerable:!1},posY:{value:null,enumerable:!1},endY:{value:null,enumerable:!1},translateStrideX:{value:null},translateStrideY:{value:null},translateStrideDuration:{value:330},_animationInterval:{value:function(){var e,t,n,i,s=Date.now(),o=!1;this.animateMomentum&&(e=s-this.startTime,e<this.__momentumDuration?(this.posX=this.startX-(this.momentumX+this.momentumX*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.posY=this.startY-(this.momentumY+this.momentumY*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.translateStrideX&&null===this.startStrideXTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posX-this.endX)<.75*this.translateStrideX)&&(this.startStrideXTime=s),this.translateStrideY&&null===this.startStrideYTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posY-this.endY)<.75*this.translateStrideY)&&(this.startStrideYTime=s)):this.animateMomentum=!1),t=Math.round(this.endX/this.translateStrideX),this.startStrideXTime&&s-this.startStrideXTime>0&&(s-this.startStrideXTime<this.translateStrideDuration?(e=this._bezierTValue((s-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),this.posX=this.posX*(1-e)+t*this.translateStrideX*e,o=!0):this.posX=t*this.translateStrideX),t=Math.round(this.endY/this.translateStrideY),this.startStrideYTime&&s-this.startStrideYTime>0&&(s-this.startStrideYTime<this.translateStrideDuration?(e=this._bezierTValue((s-this.startStrideYTime)/this.translateStrideDuration,.275,0,.275,1),this.posY=this.posY*(1-e)+t*this.translateStrideY*e,o=!0):this.posY=t*this.translateStrideY),n=this.posX,i=this.posY,this._isSelfUpdate=!0,this.translateX=n,this.translateY=i,this._shouldDispatchTranslate&&this._dispatchTranslate(),this._isSelfUpdate=!1,this.isAnimating=this.animateMomentum||o,this.isAnimating?this.needsFrame=!0:this._dispatchTranslateEnd()}}});o.prototype.captureMSPointerDown=o.prototype.capturePointerdown,o.prototype.captureMSPointerMove=o.prototype.capturePointermove,o.prototype.handleMSPointerUp=o.prototype.handlePointerup,o.prototype.handleMSPointerCancel=o.prototype.handlePointercancel,o.prototype.handleMousewheel=o.prototype.handleWheel,o.prototype.handleMSPointerDown=o.prototype._handleStart,o.prototype.handlePointerdown=o.prototype._handleStart,o.prototype.handleMousedown=o.prototype._handleStart,o.prototype.handleTouchstart=o.prototype._handleStart,void 0!==Math.sign&&(o.prototype._isNegativeNumber=function(e){return Math.sign(e)===-1})}}),montageDefine("176abc9","composer/press-composer",{dependencies:["../core/core","./composer","../core/event/mutable-event"],factory:function(e,t,n){var i=e("../core/core").Montage,s=e("./composer").Composer,o=e("../core/event/mutable-event").MutableEvent,a=function(){function e(e){return{get:function(){return this._event[e]}}}function t(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}}var n=o.specialize({type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(e){this._touch=e}}});return["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"].forEach(function(t){i.defineProperty(n,t,e(t))}),["clientX","clientY","pageX","pageY","screenX","screenY","target"].forEach(function(e){i.defineProperty(n,e,t(e))}),n}(),r=t.PressComposer=s.specialize({load:{value:function(){window.PointerEvent?this._element.addEventListener("pointerdown",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.addEventListener("MSPointerDown",this,!0):(this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("mousedown",this,!0))}},unload:{value:function(){window.PointerEvent?this._element.removeEventListener("pointerdown",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.removeEventListener("MSPointerDown",this,!0):(this._element.removeEventListener("touchstart",this,!0),this._element.removeEventListener("mousedown",this,!0))}},delegate:{value:null},cancelPress:{value:function(){return this._state===r.PRESSED&&(this._cancelPress(),!0)}},_cancelPress:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},addEventListener:{value:function(e,t,n){s.prototype.addEventListener.call(this,e,t,n),"longPress"===e&&(this._shouldDispatchLongPress=!0)}},_state:{value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{value:!1},_longPressThreshold:{value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_needDispatchSafePress:{value:!1},_longPressTimeout:{value:null},_observedPointer:{value:null},_initialCenterPositionX:{value:0},_initialCenterPositionY:{value:0},_shouldSaveInitialCenterPosition:{value:!1},_targetElementOnLastTouchMove:{value:null},_endInteraction:{value:function(){this._element&&(this._removeEventListeners(),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._targetElementOnLastTouchMove=null,this._state=r.UNPRESSED,this._initialCenterPositionX=0,this._initialCenterPositionY=0,this._shouldSaveInitialCenterPosition=!1)}},_changedTouchisObserved:{value:function(e){if(null===this._observedPointer)return!1;for(var t=0,n=e.length;t<n;t++)if(e[t].identifier===this._observedPointer)return t;return!1}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("shouldComposerSurrenderPointerToComponent",this,e,t);return("undefined"==typeof n||n!==!1)&&(this.cancelPress(),!0)}},_shouldPerformPress:{value:function(){return!(this.component.disabled||null!==this._observedPointer)}},capturePointerdown:{value:function(e){"touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH?this.captureTouchstart(e):("mouse"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE)&&this.captureMousedown(e)}},handlePointerup:{value:function(e){"touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH?this.handleTouchend(e):("mouse"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE)&&this.handleMouseup(e)}},handlePointercancel:{value:function(e){("touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.handleTouchcancel(e)}},captureTouchstart:{value:function(e){this._shouldPerformPress()&&(void 0!==e.pointerId?this._observedPointer=e.pointerId:e.changedTouches&&1===e.changedTouches.length&&(this._observedPointer=e.changedTouches[0].identifier),null!==this._observedPointer&&this.component.eventManager.claimPointer(this._observedPointer,this)?this._addPointerDownListener():this._observedPointer=null)}},handleTouchend:{value:function(e){if(null===this._observedPointer)return void this._endInteraction(e);var t;e.pointerId===this._observedPointer?t=e.target:this._changedTouchisObserved(e.changedTouches)!==!1&&(t=this._targetElementOnLastTouchMove||e.target),t&&this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&(this.element===t||this.element.contains(t)?this._dispatchPress(e,"undefined"==typeof e.pointerId?t:null):this._dispatchPressCancel(e),this._endInteraction(e))}},_saveInitialCenterPositionIfNeeded:{value:function(){this._shouldSaveInitialCenterPosition&&(this._saveInitialCenterPosition(),this._shouldSaveInitialCenterPosition=!1)}},_cancelPressIfCenterPositionChange:{value:function(e){return this._saveInitialCenterPositionIfNeeded(),!!this._isPositionChanged(e)&&(this._cancelPress(e),!0)}},_handleMove:{value:function(e){if(null===this._observedPointer)return void this._endInteraction(e);if(this._needDispatchSafePress=!1,("mouse"===this._observedPointer||e.pointerId===this._observedPointer||e.changedTouches&&this._changedTouchisObserved(e.changedTouches)!==!1)&&this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&!this._cancelPressIfCenterPositionChange(e)&&"touchmove"===e.type){var t=e.changedTouches[0];this._targetElementOnLastTouchMove=document.elementFromPoint(t.clientX,t.clientY)}}},captureWheel:{value:function(e){return null===this._observedPointer?void this._endInteraction(e):void((e.target===this.element||e.target===window||"function"==typeof e.target.contains&&e.target.contains(this.element)||this.element.contains(e.target))&&this._cancelPressIfCenterPositionChange(e))}},handleTouchcancel:{value:function(e){null!==this._observedPointer&&e.pointerId!==this._observedPointer&&this._changedTouchisObserved(e.changedTouches)===!1||(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e))}},captureMousedown:{value:function(e){0===e.button&&this._shouldPerformPress()&&(this._observedPointer="mouse",this.component.eventManager.claimPointer(this._observedPointer,this),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._addPointerDownListener():this._observedPointer=null)}},_handlePointerDown:{value:function(e){if(this._removePointerDownListener(),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)){if(this._needDispatchSafePress=!1,"touchstart"===e.type){var t=this;window.nativeAddEventListener("touchstart",function n(e){window.nativeRemoveEventListener("touchstart",n,!1),t._needDispatchSafePress=!e.defaultPrevented},!1)}this._shouldSaveInitialCenterPosition=!0,this._addEventListeners(),this._dispatchPressStart(e)}else this._observedPointer=null}},captureScroll:{value:function(e){(e.target===this.element||e.target===window||"function"==typeof e.target.contains&&e.target.contains(this.element)||this.element.contains(e.target))&&this._cancelPressIfCenterPositionChange(e)}},handleMouseup:{value:function(e){if(null===this._observedPointer)return void this._endInteraction(e);if(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)){for(var t=e.target;t!==this._element&&t&&t.parentNode;)t=t.parentNode;if(t===this._element)return this._dispatchPress(e),void this._endInteraction(e)}this._cancelPress(e)}},handleDragstart:{value:function(e){this._cancelPress(e)}},_saveInitialCenterPosition:{value:function(){if(this.element instanceof HTMLElement){var e=this.element.getBoundingClientRect();this._initialCenterPositionX=e.left+e.width/2,this._initialCenterPositionY=e.top+e.height/2}}},_isPositionChanged:{value:function(e){if(this.element instanceof HTMLElement){var t=this.element.getBoundingClientRect(),n=t.left+t.width/2,i=t.top+t.height/2;if(this._initialCenterPositionX!==n||this._initialCenterPositionY!==i){var o=e.type,a=Math.abs(this._initialCenterPositionX-n),r=Math.abs(this._initialCenterPositionY-i),l="mouse"===this._observedPointer||"wheel"===o||"mousewheel"===o||"scroll"===o?this._mouseRadiusThreshold:this._touchRadiusThreshold;return s.isCoordinateOutsideRadius(a,r,l)}}return!1}},_mouseRadiusThreshold:{value:2},_touchRadiusThreshold:{value:4},_addPointerDownListener:{value:function(){window.PointerEvent?this._element.addEventListener("pointerdown",this,!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.addEventListener("MSPointerDown",this,!1):"mouse"===this._observedPointer?this._element.addEventListener("mousedown",this,!1):this._element.addEventListener("touchstart",this,!1)}},_removePointerDownListener:{value:function(){window.PointerEvent?this._element.removeEventListener("pointerdown",this,!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.removeEventListener("MSPointerDown",this,!1):"mouse"===this._observedPointer?this._element.removeEventListener("mousedown",this,!1):this._element.removeEventListener("touchstart",this,!1)}},_addEventListeners:{value:function(){window.PointerEvent?(this.shawdowRoot&&(this.shawdowRoot.addEventListener("pointerup",this,!1),this.shawdowRoot.addEventListener("pointermove",this,!1),this.shawdowRoot.addEventListener("pointercancel",this,!1)),document.addEventListener("pointerup",this,!1),document.addEventListener("pointermove",this,!1),document.addEventListener("pointercancel",this,!1)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(this.shawdowRoot&&(this.shawdowRoot.addEventListener("MSPointerUp",this,!1),this.shawdowRoot.addEventListener("MSPointerMove",this,!1),this.shawdowRoot.addEventListener("MSPointerCancel",this,!1)),document.addEventListener("MSPointerUp",this,!1),document.addEventListener("MSPointerMove",this,!1),document.addEventListener("MSPointerCancel",this,!1)):"mouse"===this._observedPointer?(this.shawdowRoot&&(this.shawdowRoot.addEventListener("mouseup",this,!1),this.shawdowRoot.addEventListener("mousemove",this,!1),this.shawdowRoot.addEventListener("dragstart",this,!1)),document.addEventListener("mouseup",this,!1),document.addEventListener("mousemove",this,!1),this._element.addEventListener("dragstart",this,!1)):(this.shawdowRoot&&(this.shawdowRoot.addEventListener("touchend",this,!1),this.shawdowRoot.addEventListener("touchcancel",this,!1),this.shawdowRoot.addEventListener("touchmove",this,!1)),document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1),document.addEventListener("touchmove",this,!1));var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";this.shawdowRoot&&(this.shawdowRoot.addEventListener(e,this,!0),this.shawdowRoot.addEventListener("scroll",this,!0)),document.addEventListener(e,this,!0),document.addEventListener("scroll",this,!0)}},_removeEventListeners:{value:function(){window.PointerEvent?(this.shawdowRoot&&(this.shawdowRoot.removeEventListener("pointerup",this,!1),this.shawdowRoot.removeEventListener("pointermove",this,!1),this.shawdowRoot.removeEventListener("pointercancel",this,!1)),document.removeEventListener("pointerup",this,!1),document.removeEventListener("pointermove",this,!1),document.removeEventListener("pointercancel",this,!1)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(this.shawdowRoot&&(this.shawdowRoot.removeEventListener("MSPointerUp",this,!1),this.shawdowRoot.removeEventListener("MSPointerMove",this,!1),this.shawdowRoot.removeEventListener("MSPointerCancel",this,!1)),document.removeEventListener("MSPointerUp",this,!1),document.removeEventListener("MSPointerMove",this,!1),document.removeEventListener("MSPointerCancel",this,!1)):"mouse"===this._observedPointer?(this.shawdowRoot&&(this.shawdowRoot.removeEventListener("mouseup",this,!1),this.shawdowRoot.removeEventListener("mousemove",this,!1),this.shawdowRoot.removeEventListener("dragstart",this,!1)),document.removeEventListener("mouseup",this,!1),document.removeEventListener("mousemove",this,!1),this._element.removeEventListener("dragstart",this,!1)):(this.shawdowRoot&&(this.shawdowRoot.removeEventListener("touchend",this,!1),this.shawdowRoot.removeEventListener("touchcancel",this,!1),this.shawdowRoot.removeEventListener("touchmove",this,!1)),document.removeEventListener("touchend",this,!1),document.removeEventListener("touchcancel",this,!1),document.removeEventListener("touchmove",this,!1));var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";this.shawdowRoot&&(this.shawdowRoot.removeEventListener(e,this,!0),this.shawdowRoot.removeEventListener("scroll",this,!0)),document.removeEventListener(e,this,!0),document.removeEventListener("scroll",this,!0)}},_createPressEvent:{enumerable:!1,value:function(e,t){var n,i,s=t;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),n=new a,n.event=t,n.type=e,n.pointer=this._observedPointer,n.targetElement=t.target,t.changedTouches&&(i=this._changedTouchisObserved(t.changedTouches))!==!1&&(s=n.touch=t.changedTouches[i]),s&&(n.clientX=s.clientX,n.clientY=s.clientY,n.pageX=s.pageX,n.pageY=s.pageY),n}},_dispatchPressStart:{enumerable:!1,value:function(e){if(this._state=r.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e)),this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress(e.target)},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e,t){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null);var n=this._createPressEvent("press",e);if(t&&(n.targetElement=t,this._needDispatchSafePress||e.defaultPrevented)){var i=this,s=document.defaultView.defaultEventManager,o=function(a){(t===a.target||s._couldEmulatedEventHaveWrongTarget(e.changedTouches[0],a,s._emulatedEventRadiusThreshold,s._emulatedEventTimestampThreshold))&&i._dispatchSafePress(n,o)};return window.nativeAddEventListener("mousedown",o,!0),void(o.timeoutID=setTimeout(function(){i._dispatchSafePress(n,o)},300))}this.dispatchEvent(n),this._state=r.UNPRESSED}},_dispatchSafePress:{value:function(e,t){clearTimeout(t.timeoutID),t.timeoutID=null,window.nativeRemoveEventListener("mousedown",t,!0),this.dispatchEvent(e),this._state=r.UNPRESSED}},_dispatchLongPress:{enumerable:!1,value:function(e){var t;this._shouldDispatchLongPress&&(t=this._createPressEvent("longPress"),t.targetElement=e,this.dispatchEvent(t),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=r.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}},{UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2}});r.prototype.captureMSPointerDown=r.prototype.capturePointerdown,r.prototype.handleMSPointerUp=r.prototype.handlePointerup,r.prototype.handleMSPointerCancel=r.prototype.handlePointercancel,r.prototype.handleMSPointerMove=r.prototype._handleMove,r.prototype.handlePointermove=r.prototype._handleMove,r.prototype.handleTouchmove=r.prototype._handleMove,r.prototype.handleMousemove=r.prototype._handleMove,r.prototype.handleMousewheel=r.prototype.handleWheel,r.prototype.handleMSPointerDown=r.prototype._handlePointerDown,r.prototype.handlePointerdown=r.prototype._handlePointerDown,r.prototype.handleMousedown=r.prototype._handlePointerDown,r.prototype.handleTouchstart=r.prototype._handlePointerDown}}),montageDefine("176abc9","ui/flow.reel/flow-translate-composer",{dependencies:["../../composer/translate-composer","../../core/geometry/point"],factory:function(e,t,n){var i=e("../../composer/translate-composer").TranslateComposer,s=e("../../core/geometry/point").Point,o=s.convertPointFromPageToNode;t.FlowTranslateComposer=i.specialize({constructor:{value:function(){this.handleMousewheel=this.handleWheel}},stealChildrenPointer:{value:!0},_linearScrollingVector:{value:[-300,0]},linearScrollingVector:{get:function(){return this._linearScrollingVector},set:function(e){this._linearScrollingVector=e}},startTranslateSpeed:{value:500},startTranslateRadius:{value:8},_startPageX:{value:null},_startPageY:{value:null},_pageX:{value:null},_pageY:{value:null},_pointerStartX:{value:null},_pointerStartY:{value:null},_contentOffsetX:{value:null},_contentOffsetY:{value:null},_superStart:{value:i.prototype._start},_start:{value:function(e,t,n,i){this._superStart(e,t,n,i);var a=window.getComputedStyle(this._element,null),r=this.convertCssPixelsPropertyStringToNumber(a.getPropertyValue("border-left-width")),l=this.convertCssPixelsPropertyStringToNumber(a.getPropertyValue("border-top-width")),h=this.convertCssPixelsPropertyStringToNumber(a.getPropertyValue("padding-left")),d=this.convertCssPixelsPropertyStringToNumber(a.getPropertyValue("padding-top")),u=o(this._element,(new s).init(e,t));this._pointerStartX=this._pointerX=u.x-r-h,this._pointerStartY=this._pointerY=u.y-l-d,this._contentOffsetX=this._startPageX-this._pointerStartX,this._contentOffsetY=this._startPageY-this._pointerStartY,this._computePointedElement(),this._startPageX=this._pageX=e,this._startPageY=this._pageY=t,this._startScroll=this._scroll,this._previousScrollDelta=0,this._scrollEnd=null}},_analyzeMovement:{value:function(e){var t,n,i,s=e.velocity;s&&(t=s.speed,t>=this.startTranslateSpeed?this._stealPointer():(n=this.startPageX-e.pageX,i=this.startPageY-e.pageY,n*n+i*i>this.startTranslateRadius*this.startTranslateRadius&&this._stealPointer()))}},_dispatchTranslateStart:{value:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent("translateStart",!0,!0,null),n.scroll=this._scroll,n.translateX=0,n.translateY=0,n.pointer=this._observedPointer,this.dispatchEvent(n)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.scroll=this._scroll,e.translateX=0,e.translateY=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslateCancel:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateCancel",!0,!0,null),e.scroll=this._scroll,e.translateX=0,e.translateY=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.scroll=this._scroll,e.translateX=0,e.translateY=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_move:{value:function(e,t){this._isFirstMove&&(this._dispatchTranslateStart(),this._isFirstMove=!1),this._pageX=e,this._pageY=t,this._updateLinearScroll(),this._shouldDispatchTranslate&&this._dispatchTranslate()}},_end:{value:function(e){if(this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)){this.startTime=Date.now(),this.endX=this.startX=this._pageX,this.endY=this.startY=this._pageY;var t=e.velocity;this._hasMomentum&&(t.speed>40||this.translateStrideX)?("vertical"!==this._axis?this.momentumX=t.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):this.momentumX=0,"horizontal"!==this._axis?this.momentumY=t.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):this.momentumY=0,this.endX=this.startX+this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY+this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||this._dispatchTranslateEnd()}this._releaseInterest()}},_translateEndTimeout:{value:null},_mousewheelStrideTimeout:{value:null},_previousDelta:{value:0},_listenToWheelEvent:{value:!0},captureWheel:{value:function(){this.eventManager.componentClaimingPointer(this._WHEEL_POINTER)||this.eventManager.claimPointer(this._WHEEL_POINTER,this.component)}},handleWheel:{value:function(e){var t=this;if(this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this.component)){var n,i=this._scroll,s=e.wheelDeltaX||-e.deltaX||0,o=e.wheelDeltaY||-e.deltaY||0;this.translateStrideX?(clearTimeout(this._mousewheelStrideTimeout),n=Math.abs(this._linearScrollingVector[0])>Math.abs(this._linearScrollingVector[1])?Math.abs(s)>Math.abs(o)?this._linearScrollingVector[0]*-s/Math.abs(this._linearScrollingVector[0]):0:Math.abs(s)>Math.abs(o)?0:this._linearScrollingVector[1]*-o/Math.abs(this._linearScrollingVector[1]),(null===this._mousewheelStrideTimeout||Math.abs(n)>Math.abs(this._previousDelta*(null===this._mousewheelStrideTimeout?2:4)))&&(n>1?this.callDelegateMethod("previousStride",this):n<-1&&this.callDelegateMethod("nextStride",this)),this._mousewheelStrideTimeout=setTimeout(function(){t._mousewheelStrideTimeout=null,t._previousDelta=0},70),t._previousDelta=n,0!==n&&this._shouldPreventDefault(e)&&e.preventDefault()):(null===this._translateEndTimeout&&this._dispatchTranslateStart(),this._pageX=this._pageX+20*s/100,this._pageY=this._pageY+20*o/100,this._updateScroll(),this._dispatchTranslate(),clearTimeout(this._translateEndTimeout),this._translateEndTimeout=setTimeout(function(){t._dispatchTranslateEnd(),t._translateEndTimeout=null},400),i!==this._scroll&&this._shouldPreventDefault(e)&&e.preventDefault()),this.eventManager.forfeitPointer(this._WHEEL_POINTER,this.component)}}},_scroll:{value:0},scroll:{get:function(){return this._scroll},set:function(e){null!==this.minScroll&&e<this.minScroll&&(e=this.minScroll),null!==this.maxScroll&&e>this.maxScroll&&(e=this.maxScroll),this._scroll=e}},minScroll:{value:null},maxScroll:{value:null},_flow:{value:null},flow:{get:function(){return this._flow},set:function(e){this._flow=e,this.component=e}},_updateScroll:{value:function(){this._updateLinearScroll()}},_updateLinearScroll:{value:function(){var e=this._flow,t=e.isCameraEnabled?500/e._height:1,n=(this._pageX-this._startPageX)*this._linearScrollingVector[0]*t*e._sceneScaleX.denominator/e._sceneScaleX.numerator,i=(this._pageY-this._startPageY)*this._linearScrollingVector[1]*t*e._sceneScaleY.denominator/e._sceneScaleY.numerator,s=this._linearScrollingVector[0]*this._linearScrollingVector[0]+this._linearScrollingVector[1]*this._linearScrollingVector[1],o=(n+i)/s;this.scroll+=o-this._previousScrollDelta,this._previousScrollDelta=o}},frame:{value:function(e){this.isAnimating&&this._animationInterval()}},convertCssPixelsPropertyStringToNumber:{value:function(e){return"string"==typeof e&&"px"===e.substr(-2)?1*e.substr(0,e.length-2):0}},_rayPointDistance:{value:function(e,t){var n,i,s,o,a;return n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],n>=0&&(i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n/=i,s=e[0]*n-t[0],o=e[1]*n-t[1],a=e[2]*n-t[2],Math.sqrt(s*s+o*o+a*a))}},_closerIndex:{value:null},_computePointedElement_spline:{value:[]},_computePointedElement:{value:function(){var e=this._flow._splinePaths,t=e.length;if(t){var n,i,s,o,a,r,l,h,d,u=this._flow,c=u._viewpointTargetPoint[0]-u._viewpointPosition[0],m=u._viewpointTargetPoint[2]-u._viewpointPosition[2],p=Math.atan2(c,m),_=m*Math.cos(-p)-c*Math.sin(-p),v=Math.atan2(u._viewpointTargetPoint[1]-u._viewpointPosition[1],_),g=.5*this._element.clientWidth-this._pointerX,f=this._pointerY-.5*this._element.clientHeight,w=.5*this._element.offsetHeight/Math.tan(u._viewpointFov*u._doublePI*(1/720)),b=this._computePointedElement_spline,C=u._visibleIndexes,P=C.length,S=u._sceneScale,E=null,T=1e100;for(i=w*Math.cos(v)-f*Math.sin(v),f=w*Math.sin(v)+f*Math.cos(v),n=i*Math.cos(p)-g*Math.sin(p),g=i*Math.sin(p)+g*Math.cos(p),l=[g,f,n],d=0;d<e.length;d++)for(d=0;d<e.length;d++)b[d]=e[d].transform([S.x.numerator/S.x.denominator,0,0,0,0,S.y.numerator/S.y.denominator,0,0,0,0,S.z.numerator/S.z.denominator,0,-u._viewpointPosition[0]+.5*u._firstIterationWidth+u._firstIterationOffsetLeft,-u._viewpointPosition[1]+.5*u._firstIterationHeight+u._firstIterationOffsetTop,-u._viewpointPosition[2],1]);for(d=0;d<P;d++)if(h=this._flow.offset(C[d]),s=h.pathIndex,o=h.slideTime,r=b[s]._convertSplineTimeToBezierIndexTime(o),null!==r){var I=b[s].getPositionAtIndexTime(r);a=this._rayPointDistance(l,I),a!==!1&&a<T&&(T=a,E=C[d])}this._closerIndex=E,b.length=0}}},_previousScrollDelta:{value:0},_startScroll:{value:0},_translateStride:{value:null},translateStride:{get:function(){return this._translateStride},set:function(e){this._translateStride=e,this.translateStrideX=e}},_scrollEnd:{value:null},_scrollStart:{value:null},_hasMomentum:{value:!0},isLimitedToSingleStride:{value:!1},_animationInterval:{value:function(){var e,t,n,i,s,o,a=Date.now(),r=!1;s=this.minScroll,o=this.maxScroll,this.minScroll=null,this.maxScroll=null,null===this._scrollEnd&&(this._scrollStart=this.scroll,this._pageX=this.endX,this._pageY=this.endY,this._updateScroll(),this._scrollEnd=this.scroll,this.isLimitedToSingleStride&&this.translateStrideX&&(this._scrollEnd>Math.floor(this._scrollStart)+this.translateStrideX&&(this._scrollEnd=Math.floor(this._scrollStart)+this.translateStrideX),this._scrollEnd<Math.ceil(this._scrollStart)-this.translateStrideX&&(this._scrollEnd=Math.ceil(this._scrollStart)-this.translateStrideX)),this._pageX=this.startX,this._pageY=this.startY,this._updateScroll()),this.animateMomentum?(e=a-this.startTime,e<this.__momentumDuration?(this._pageX=this.startX+(this.momentumX+this.momentumX*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this._pageY=this.startY+(this.momentumY+this.momentumY*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this._updateScroll(),this.translateStrideX&&null===this.startStrideXTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.scroll-this._scrollEnd)<.75*this.translateStrideX)&&(this.startStrideXTime=a,this._strideStartScroll=this._scroll)):this.animateMomentum=!1):null===this.startStrideXTime&&(this.startStrideXTime=this.startTime,this._strideStartScroll=this._scrollStart),i=this.scroll,this.startStrideXTime&&a-this.startStrideXTime>0&&(n=Math.round(this._scrollEnd/this.translateStrideX),a-this.startStrideXTime<this.translateStrideDuration?(e=this._bezierTValue((a-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),t=(a-this.startStrideXTime)/this.translateStrideDuration,i=i*(1-t)+(n*this.translateStrideX*e+this._strideStartScroll*(1-e))*t,r=!0):(i=n*this.translateStrideX,this.animateMomentum=!1)),this.minScroll=s,this.maxScroll=o,i<s&&(i=s,this.animateMomentum=!1,r=!1),i>o&&(i=o,this.animateMomentum=!1,r=!1),this.scroll=i,this.isAnimating=this.animateMomentum||r,this.isAnimating?this.needsFrame=!0:(this._dispatchTranslateEnd(),this._scrollEnd=null)}}})}}),montageDefine("176abc9","core/range-controller",{dependencies:["./core","collections/generic-collection","collections/listen/array-changes","core/deprecate","./core","./core","./core","./core"],
factory:function(e,t,n){var i=e("./core").Montage,s=e("collections/generic-collection"),o=e("collections/listen/array-changes").observableArrayProperties,a=e("core/deprecate"),r=Object.freeze([]),l=function(e,t){var n=e;return n.__proto__=l.prototype,n.rangeController=t,n.contentEquals=e&&e.contentEquals||Object.is,n};l.prototype=Object.create(Array.prototype,o),Object.defineProperty(l.prototype,"clone",{value:function(){return this.slice()}}),l.prototype.oldSwap=o.swap.value,Object.defineProperty(l.prototype,"swap",{configurable:!1,value:function(e,t,n){return this.swap_or_push(e,t,n)}}),l.prototype.oldPush=o.push.value,Object.defineProperty(l.prototype,"push",{configurable:!1,value:function(){for(var e=-1,t=arguments.length,n=Array(t);++e<t;)n[e]=arguments[e];this.swap_or_push(this.length,0,n)}}),Object.defineProperty(l.prototype,"swap_or_push",{configurable:!1,value:function(e,t,n){var i=this.rangeController.content;this.contentEquals=i&&i.contentEquals||Object.is,e=e>=0?e:this.length+e;var s,o=this.length,a=Math.min(t,o-e);n?(n.contentEquals=this.contentEquals,s=n.filter(function(t,s){if(i&&!i.has(t))return!1;if(n.findLast(t)>s)return!1;var o=this.find(t);return o<0||o>=e&&o<e+a},this)):s=r;var l;l=0===a?r:Array.prototype.slice.call(this,e,e+a);var h=s.length-l.length,d=Math.max(this.length+h,e+s.length);if(!this.rangeController.allowsMultipleSelection&&d>1){var u=s.length?s[s.length-1]:this.one();return 0===o?(this.oldPush(u),r):this.oldSwap(0,o,[u])}return this.rangeController.avoidsEmptySelection&&0===d?i.has(this[0])?this.length-1===0?r:this.oldSwap(1,this.length-1):0===this.length?(this.oldPush(i.one()),r):this.oldSwap(0,this.length,[i.one()]):this.oldSwap(e,t,s)}}),t.RangeController=i.specialize({constructor:{value:function(e){this.content=null,this._selection=new l([],this),this.sortPath=null,this.filterPath=null,this.reversed=!1,this.selectAddedContent=!1,this.deselectInvisibleContent=!1,this.clearSelectionOnOrderChange=!1,this.avoidsEmptySelection=!1,this.organizedContent=[],this.organizedContent.addRangeChangeListener(this,"organizedContent"),this.defineBinding("_filteredContent",{"<-":"$filterPath.defined() ? content.filter{path($filterPath)} : content"}),this.defineBinding("_sortedContent",{"<-":"$sortPath.defined() ? _filteredContent.sorted{path($sortPath)} : _filteredContent"}),this.defineBinding("organizedContent.rangeContent()",{"<-":"$reversed ?? 0 ? _sortedContent.reversed() : _sortedContent"}),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addPathChangeListener("sortPath",this,"handleOrderChange"),this.addPathChangeListener("reversed",this,"handleOrderChange"),this.addOwnPropertyChangeListener("allowsMultipleSelection",this),this.iterations=[],e&&this.initWithContent(e)}},initWithContent:{value:function(e){return this.content=e,this}},sortPath:{value:null},reversed:{value:null},filterPath:{value:null},selectAddedContent:{value:!1},deselectInvisibleContent:{value:!1},clearSelectionOnOrderChange:{value:!1},avoidsEmptySelection:{value:!1},allowsMultipleSelection:{value:!1},multiSelect:{set:function(e){a.deprecationWarning("multiSelect","allowsMultipleSelection"),this.allowsMultipleSelection=!!e},get:function(){return a.deprecationWarning("multiSelect","allowsMultipleSelection"),this.allowsMultipleSelection}},organizedContent:{value:null},iterations:{value:null},_selection:{value:null},selection:{get:function(){return this._selection},set:function(e){var t=[0,this._selection.length];e&&e.toArray&&(t=t.concat(e.toArray())),this._selection.splice.apply(this._selection,t)}},select:{value:function(e){!this.allowsMultipleSelection&&this.selection.length>=1&&this.selection.clear(),this.selection.add(e)}},deselect:{value:function(e){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection["delete"](e)}},clearSelection:{value:function(){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection.clear()}},add:{value:function(e){var t;return this.content||(this.content=[]),t=this.content.add(e),t&&this.handleAdd(e),t}},push:{value:function(){for(var e=this.content.push.apply(this.content,arguments),t=0;t<arguments.length;t++)this.handleAdd(arguments[t]);return e}},pop:{value:function(){return this.content.pop()}},shift:{value:function(){return this.content.shift()}},unshift:{value:function(){for(var e=this.content.unshift.apply(this.content,arguments),t=0;t<arguments.length;t++)this.handleAdd(arguments[t]);return e}},splice:{value:function(){for(var e=this.content.splice.apply(this.content,arguments),t=2;t<arguments.length;t++)this.handleAdd(arguments[t]);return e}},swap:{value:function(e,t,n){var i=this.content.swap.apply(this.content,arguments);if(n)for(e=2;e<n.length;e++)this.handleAdd(n[e]);return i}},"delete":{value:function(e){return this.content["delete"](e)}},has:{value:function(e){return!!this.content&&this.content.has(e)}},addEach:{value:s.prototype.addEach},deleteEach:{value:s.prototype.deleteEach},clear:{value:function(){this.content.clear()}},addContent:{value:function(){var e=new this.contentConstructor;return this.add(e),e}},_contentConstructor:{value:null},contentConstructor:{get:function(){return this._contentConstructor?this._contentConstructor:this.content&&this.content.contentConstructor?this.content.contentConstructor:Object},set:function(e){this._contentConstructor=e}},handleContentRangeChange:{value:function(e,t,n){if(this.selection.length>0){var i=this.content&&this.content.contentEquals||Object.is;t.deleteEach(e,i),this.selection.length&&(this.selection.deleteEach(t),0===this.selection.length&&this.content&&this.content.length&&this.avoidsEmptySelection&&!this.allowsMultipleSelection&&this.selection.add(this.content[this.content.length-1]))}}},handleSelectionRangeChange:{value:function(e,t,n){if(this.selection)if(this.content){for(var i=[],s=0;s<e.length;s++)this.content.has(e[s])||i.push(e[s]);if(this._selection.deleteEach(i),!this.allowsMultipleSelection&&this._selection.length>1){var o=this._selection.pop();this._selection.clear(),this._selection.add(o)}this.avoidsEmptySelection&&0===this._selection.length&&this._selection.add(t[0])}else this._selection.clear()}},handleOrganizedContentRangeChange:{value:function(e,t,n){if(this.deselectInvisibleContent&&this.selection){var i=t.clone(1);i.deleteEach(e),this.selection.deleteEach(t)}}},handleOrderChange:{value:function(){this.clearSelectionOnOrderChange&&this.selection&&this.selection.clear()}},handleAdd:{value:function(e){this.selectAddedContent&&this.selection&&(!this.allowsMultipleSelection&&this.selection.length?this.selection.swap(0,this.selection.length,[e]):this.selection.add(e))}},handleAllowsMultipleSelectionChange:{value:function(){if(this.selection){var e=this.selection.length;if(!this.allowsMultipleSelection&&e>1){var t=this._selection.pop();this._selection.clear(),this._selection.add(t)}}}}},{objectDescriptorModuleId:e("./core")._objectDescriptorModuleIdDescriptor,objectDescriptor:e("./core")._objectDescriptorDescriptor,blueprintModuleId:e("./core")._blueprintModuleIdDescriptor,blueprint:e("./core")._blueprintDescriptor})}}),montageDefine("176abc9","ui/flow.reel/flow-bezier-spline",{dependencies:["../../core/core"],factory:function(e,t,n){var i=e("../../core/core").Montage,s=t.FlowBezierSpline=i.specialize({constructor:{value:function(){this._knots=[],this._densities=[],this._getStyleAtIndexTimeBuffer=[]}},_parameterKeys:{value:void 0},knots:{get:function(){return this._knots},set:function(e){this._knots=e}},previousHandlers:{get:function(){return this._previousHandlers||(this._previousHandlers=[]),this._previousHandlers},set:function(e){this._previousHandlers=e}},nextHandlers:{get:function(){return this._nextHandlers||(this._nextHandlers=[]),this._nextHandlers},set:function(e){this._nextHandlers=e}},densities:{get:function(){return this._densities},set:function(e){this._densities=e,this._densitiesLength=this._densities.length,this._maxTime=null}},_parameters:{value:{}},parameters:{get:function(){return this._parameters||(this._parameters={}),this._parameters},set:function(e){this._parameters=e}},_maxTime:{enumerable:!1,value:null},computeMaxTime:{value:function(){return this._computeDensitySummation(),this._densitySummation.length?this._maxTime=this._densitySummation[this._densitySummation.length-1]:this._maxTime=0,this._maxTime}},_densitySummation:{enumerable:!1,value:null},_computeDensitySummation:{enumerable:!1,value:function(){var e,t=this.densities,n=t.length-1,i=0;for(this._densitySummation=[],e=0;e<n;e++)i+=(t[e]+t[e+1])/2,this._densitySummation[e]=i;this._maxTime=null}},_convertSplineTimeToBezierIndexTime:{enumerable:!1,value:function(e){if(e<0)return null;if(null===this._maxTime&&this.computeMaxTime(),e>=this._maxTime)return null;for(var t,n,i,s,o,a=this._densitySummation,r=a.length,l=r-1,h=r>>1;h;)l-h>=0&&a[l-h]>e?l-=h:h>>=1;return t=e-(l?a[l-1]:0),i=this._densities[l],s=this._densities[l+1],o=i-s,n=o<-1e-10||o>1e-10?(i-Math.sqrt(i*i+2*(s-i)*t))/o:t/i,[l,n]}},getPositionAtIndexTime:{value:function(e,t){var n=e[0],i=e[1],s=this._knots[n],o=this._nextHandlers[n],a=this._previousHandlers[n+1],r=this._knots[n+1],l=1-i,h=l*l*l,d=l*l*i*3,u=l*i*i*3,c=i*i*i;return t?[t.x.numerator*(s[0]*h+o[0]*d+a[0]*u+r[0]*c)/t.x.denominator,t.y.numerator*(s[1]*h+o[1]*d+a[1]*u+r[1]*c)/t.y.denominator,t.z.numerator*(s[2]*h+o[2]*d+a[2]*u+r[2]*c)/t.z.denominator]:[s[0]*h+o[0]*d+a[0]*u+r[0]*c,s[1]*h+o[1]*d+a[1]*u+r[1]*c,s[2]*h+o[2]*d+a[2]*u+r[2]*c]}},getRotationAtIndexTime:{value:function(e){var t,n,i,s=e[0],o=e[1],a=1-o,r=this._parameters;return t="undefined"!=typeof r.rotateX?r.rotateX.data[s]*a+r.rotateX.data[s+1]*o:0,n="undefined"!=typeof r.rotateY?r.rotateY.data[s]*a+r.rotateY.data[s+1]*o:0,i="undefined"!=typeof r.rotateZ?r.rotateZ.data[s]*a+r.rotateZ.data[s+1]*o:0,[t,n,i]}},_getStyleAtIndexTimeBuffer:{value:null},getStyleAtIndexTime:{value:function(e){var t,n,i,s,o,a,r,l=e[0],h=e[1],d=this._parameters,u=1-h,c=this._getStyleAtIndexTimeBuffer;if(c.length=0,s=this._parameterKeys)for(o=s.length,t=0;t<o;t++)n=s[t],a=d[n],r=a.data,"rotateX"!==n&&"rotateY"!==n&&"rotateZ"!==n&&void 0!==r[l]&&void 0!==r[l+1]&&(i=n,i+=":",i+=1e-5*(1e5*(r[l]*u+r[l+1]*h)>>0),i+=a.units,i+=";",c.push(i));return c.join("")}},transformVectorArray:{value:function(e,t){var n,i,s=e.length,o=[];for(i=0;i<s;i++)n=e[i],n&&(o[i]=[n[0]*t[0]+n[1]*t[4]+n[2]*t[8]+t[12],n[0]*t[1]+n[1]*t[5]+n[2]*t[9]+t[13],n[0]*t[2]+n[1]*t[6]+n[2]*t[10]+t[14]]);return o}},transform:{value:function(e){var t=new s;return t._densities=this._densities,t._densitySummation=this._densitySummation,t._knots=this.transformVectorArray(this.knots,e),t._previousHandlers=this.transformVectorArray(this.previousHandlers,e),t._nextHandlers=this.transformVectorArray(this.nextHandlers,e),t}},deCasteljau:{value:function(e,t,n,i,s){var o=1-s,a=o*e[0]+s*t[0],r=o*t[0]+s*n[0],l=o*n[0]+s*i[0],h=o*a+s*r,d=o*r+s*l,u=o*h+s*d,c=o*e[1]+s*t[1],m=o*t[1]+s*n[1],p=o*n[1]+s*i[1],_=o*c+s*m,v=o*m+s*p,g=o*_+s*v,f=o*e[2]+s*t[2],w=o*t[2]+s*n[2],b=o*n[2]+s*i[2],C=o*f+s*w,P=o*w+s*b,S=o*C+s*P;return[[e,[a,c,f],[h,_,C],[u,g,S]],[[u,g,S],[d,v,P],[l,p,b],i]]}},cubic:{enumerable:!1,value:function(e,t,n,i,s){return((e*s+t)*s+n)*s+i}},cubeRoot:{enumerable:!1,value:function(e){return e>0?Math.pow(e,1/3):-Math.pow(-e,1/3)}},cubicRealRoots:{enumerable:!1,value:function(e,t,n,i){var s=Math;if(0!==e){var o=1/e,a=t*o,r=n*o,l=(3*r-a*a)*(1/9),h=(4.5*a*r-13.5*i*o-a*a*a)*(1/27),d=l*l*l+h*h;if(d>0){var u=s.sqrt(d);return[this.cubeRoot(h+u)+this.cubeRoot(h-u)+a*(-1/3)]}if(d>0){if(0!==h){var c=this.cubeRoot(h),m=2*c+a*(-1/3),p=a*(-1/3)-c;return m<p?[m,p]:[p,m]}return[a*(-1/3)]}var _=s.acos(h/s.sqrt(-l*l*l))*(1/3),v=s.sqrt(-l),g=v*s.sin(_)*1.7320508075688772,f=a*(-1/3);return v*=s.cos(_),[f-v-g,f-v+g,f+2*v]}if(0!==t){var w=n*n-4*t*i;return w>=0?(w=s.sqrt(w),[(-n-w)/(2*t),(w-n)/(2*t)]):[]}return 0!==n?[-i/n]:[]}},_halfPI:{enumerable:!1,value:.5*Math.PI},reflectionMatrix:{enumerable:!1,value:function(e,t,n){var i=Math,s=this._halfPI-i.atan2(t,e),o=i.sin(s),a=i.cos(s),r=this._halfPI-i.atan2(n,e*o+t*a),l=i.sin(r);return[l*o,a*l,i.cos(r)]}},reflectedY:{enumerable:!1,value:function(e,t,n,i){return e*i[0]+t*i[1]+n*i[2]}},getScaledKnots:{value:function(e){var t,n=[];for(t=0;t<this._knots.length;t++)this._knots[t]&&(n[t]=[e.x.numerator*this._knots[t][0]/e.x.denominator,e.y.numerator*this._knots[t][1]/e.y.denominator,e.z.numerator*this._knots[t][2]/e.z.denominator]);return n}},getScaledPreviousHandlers:{value:function(e){var t,n=[];for(t=0;t<this._previousHandlers.length;t++)this._previousHandlers[t]&&(n[t]=[e.x.numerator*this._previousHandlers[t][0]/e.x.denominator,e.y.numerator*this._previousHandlers[t][1]/e.y.denominator,e.z.numerator*this._previousHandlers[t][2]/e.z.denominator]);return n}},getScaledNextHandlers:{value:function(e){var t,n=[];for(t=0;t<this._nextHandlers.length;t++)this._nextHandlers[t]&&(n[t]=[e.x.numerator*this._nextHandlers[t][0]/e.x.denominator,e.y.numerator*this._nextHandlers[t][1]/e.y.denominator,e.z.numerator*this._nextHandlers[t][2]/e.z.denominator]);return n}},directedPlaneBezierIntersection:{enumerable:!1,value:function(e,t,n,i,s,o,a,r){for(var l,h,d=this.reflectionMatrix(i[0],i[1],i[2]),u=this.reflectedY(s[0]-e,s[1]-t,s[2]-n,d),c=this.reflectedY(o[0]-e,o[1]-t,o[2]-n,d),m=this.reflectedY(a[0]-e,a[1]-t,a[2]-n,d),p=this.reflectedY(r[0]-e,r[1]-t,r[2]-n,d),_=3*(c-m)+p-u,v=3*(u+m)-6*c,g=3*(c-u),f=this.cubicRealRoots(_,v,g,u),w=0,b=0,C=[];b<f.length&&f[b]<=0;)b++;for(;b<f.length&&f[b]<1;)l=w,w=f[b],h=.5*(l+w),this.cubic(_,v,g,u,h)>=0&&C.push([l,w]),b++;return h=.5*(w+1),this.cubic(_,v,g,u,h)>=0&&C.push([w,1]),C}}})}}),montageDefine("730a65b","ui/main.reel/main.html",{text:'<!DOCTYPE html><html><head><meta charset=utf-8><title>Main</title><style>.Main{height:100%}.Flow{position:absolute;top:0;left:0;right:0;bottom:0}.Flow *{-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.Flow-item{position:relative;width:500px;height:500px;touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.Flow-item-wrapper{position:absolute;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;width:500px;height:500px;background-color:#000}.Flow-item.selected .Flow-item-wrapper{background-color:transparent;-webkit-animation:displaycard 1s both normal;animation:displaycard 1s both normal}@-webkit-keyframes displaycard{0%{-webkit-transform:translateX(0);transform:translateX(0)}70%{-webkit-transform:translateX(200px);transform:translateX(200px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}100%{-webkit-transform:translateX(100px) translateZ(1000px);transform:translateX(100px) translateZ(1000px)}}@keyframes displaycard{0%{-webkit-transform:translateX(0);transform:translateX(0)}70%{-webkit-transform:translateX(200px);transform:translateX(200px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}100%{-webkit-transform:translateX(100px) translateZ(1000px);transform:translateX(100px) translateZ(1000px)}}.Main .Post{opacity:0;z-index:0}.Main .Post--revealed{opacity:1;z-index:15;transition:opacity 500ms;transition-delay:800ms}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"main"}}},"actionEventListener":{"prototype":"montage/core/event/action-event-listener","properties":{"action":"clearSelection","handler":{"@":"postsController"}},"_dev":{"isHidden":true}},"card":{"prototype":"ui/card.reel","properties":{"element":{"#":"card"}},"bindings":{"post":{"<-":"@flow:iteration.object"}}},"flow":{"prototype":"montage/ui/flow.reel","properties":{"element":{"#":"flow"},"cameraFov":50,"cameraPosition":[-3.949999999998454,-0.2499999999990905,1655.5749999999966],"cameraTargetPoint":[-0.6999999999998181,-10,357.4249999999979],"contentController":{"@":"postsController"},"flowEditorMetadata":{"flowEditorVersion":0.1,"shapes":[{"type":"FlowSpline","name":"Spline 1","pathIndex":0}],"selected":0},"hasElasticScrolling":true,"hasSelectedIndexScrolling":true,"isSelectionEnabled":true,"linearScrollingVector":[-300,0],"paths":[{"knots":[{"previousHandlerPosition":[],"nextDensity":10,"previousDensity":10,"knotPosition":[-761.8749999999984,-270,691.324999999998],"rotateX":0,"rotateY":0,"rotateZ":0,"opacity":1,"nextHandlerPosition":[738.1250000000016,-270,-328.675000000002]},{"knotPosition":[1937.099999999999,-270,-1316.0499999999993],"nextHandlerPosition":[3207.8250000000007,-270,-1461.849999999998],"previousHandlerPosition":[666.3749999999973,-270,-1170.2500000000005],"nextDensity":10,"previousDensity":10,"rotateX":0,"rotateY":0,"rotateZ":0,"opacity":1}],"units":{"rotateX":"","rotateY":"","rotateZ":"","opacity":""},"headOffset":1,"tailOffset":0}],"scrollingTransitionDuration":500,"scrollingTransitionTimingFunction":"ease","scrollVectorX":true,"scrollVectorY":true,"selectedIndexScrollingOffset":0}},"header":{"prototype":"ui/header.reel","properties":{"element":{"#":"header"}},"bindings":{"selectedPost":{"<-":"@postsController.selection.0"}},"listeners":[{"type":"hidePost","useCapture":false,"listener":{"@":"actionEventListener"}}]},"post":{"prototype":"ui/post.reel","properties":{"element":{"#":"post"}},"bindings":{"classList.has(\'Post--revealed\')":{"<-":"@postsController.selection.0"},"post":{"<-":"@postsController.selection.0"}}},"postsController":{"prototype":"montage/core/range-controller","bindings":{"content":{"<-":"@owner.posts"}}},"wordpressConnector":{"prototype":"montage-wordpress/core/wordpress-connector","properties":{"host":{"<-":"@owner.hostname"}}}}</script></head><body><div data-montage-id=main class=Main><header data-montage-id=header></header><div data-montage-id=post id=blog-post></div><div data-montage-id=flow class=Flow><div class="Flow-item js-card"><div class=Flow-item-wrapper><div data-montage-id=card></div></div></div></div></div></body></html>'}),montageDefine("e64bb50","ui/button.reel/button.html",{text:'<!DOCTYPE html><html><head><meta charset=utf-8><style>.digit-Button{display:inline-block;-moz-box-sizing:border-box;box-sizing:border-box;height:2.5em;min-width:2.5em;margin:0 2px;padding:.625em 1em;border-radius:1.25em;vertical-align:middle;font-size:100%;color:inherit;border:1px solid;background-color:transparent;outline:none;cursor:pointer;text-decoration:none;-webkit-tap-highlight-color:transparent}.digit-Button.montage--active{background-color:hsla(0,0%,0%,.06)}.digit-Button:focus{box-shadow:inset 0 0 0 1px}[data-montage-skin="wireframe"] .digit-Button{color:#4D4D4D;border-color:#b3b3b3;background-color:#f2f2f2}[data-montage-skin="wireframe"] .digit-Button.montage--active{background-color:#e5e5e5}[data-montage-skin="wireframe"] .digit-Button:focus{border-color:#4D4D4D;box-shadow:none}[data-montage-skin="light"] .digit-Button{color:hsla(0,0%,0%,.7);text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-color:hsl(0,0%,80%);background-image:-webkit-linear-gradient(top,hsl(0,0%,96%),hsl(0,0%,92%));background-image:-moz-linear-gradient(top,hsl(0,0%,96%),hsl(0,0%,92%));background-image:-ms-linear-gradient(top,hsl(0,0%,96%),hsl(0,0%,92%));background-image:linear-gradient(top,hsl(0,0%,96%),hsl(0,0%,92%));box-shadow:inset 0 1px 1px hsla(0,0%,100%,.8),inset 0 -1px 1px hsla(0,0%,0%,.04),0 1px 0 hsla(0,0%,100%,.6);-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}[data-montage-skin="light"] .digit-Button.montage--active{border-color:hsla(0,0%,70%,1);background-image:-webkit-linear-gradient(top,hsl(0,0%,90%),hsl(0,0%,86%));background-image:-moz-linear-gradient(top,hsl(0,0%,90%),hsl(0,0%,86%));background-image:-ms-linear-gradient(top,hsl(0,0%,90%),hsl(0,0%,86%));background-image:linear-gradient(top,hsl(0,0%,90%),hsl(0,0%,86%));box-shadow:inset 0 1px 3px hsla(0,0%,0%,.2),0 1px 0 hsla(0,0%,100%,.6)}[data-montage-skin="light"] .digit-Button:focus{border-color:hsl(0,0%,50%)}[data-montage-skin="dark"] .digit-Button{color:hsl(0,0%,80%);text-shadow:0 1px 0 hsla(0,0%,0%,.2);border-color:hsl(0,0%,15%);background-image:-webkit-linear-gradient(top,hsl(0,0%,30%),hsl(0,0%,24%));background-image:-moz-linear-gradient(top,hsl(0,0%,30%),hsl(0,0%,24%));background-image:-ms-linear-gradient(top,hsl(0,0%,30%),hsl(0,0%,24%));background-image:linear-gradient(top,hsl(0,0%,30%),hsl(0,0%,24%));box-shadow:inset 0 1px 1px hsla(0,0%,100%,.1),inset 0 -1px 1px hsla(0,0%,0%,.06),0 1px 0 hsla(0,0%,100%,.1)}[data-montage-skin="dark"] .digit-Button.montage--active{color:hsl(0,0%,60%);border-color:hsl(0,0%,15%);background-image:-webkit-linear-gradient(top,hsl(0,0%,24%),hsl(0,0%,18%));background-image:-moz-linear-gradient(top,hsl(0,0%,24%),hsl(0,0%,18%));background-image:-ms-linear-gradient(top,hsl(0,0%,24%),hsl(0,0%,18%));background-image:linear-gradient(top,hsl(0,0%,24%),hsl(0,0%,18%));box-shadow:inset 0 1px 3px hsla(0,0%,0%,.3),0 1px 0 hsla(0,0%,100%,.1)}[data-montage-skin="dark"] .digit-Button:focus{border-color:hsl(0,0%,50%)}.digit-Button--glass,.digit-Button--glass.montage--active,[data-montage-skin="wireframe"] .digit-Button--glass,[data-montage-skin="wireframe"] .digit-Button--glass.montage--active,[data-montage-skin="light"] .digit-Button--glass,[data-montage-skin="light"] .digit-Button--glass.montage--active,[data-montage-skin="dark"] .digit-Button--glass,[data-montage-skin="dark"] .digit-Button--glass.montage--active{margin:0;border-radius:0;border:none;background:0 0;box-shadow:none}[data-montage-skin="dark"] .digit-Button--glass.montage--active{color:hsla(0,0%,100%,.5)}.digit-ButtonGroup{display:inline-block;vertical-align:middle;padding-left:1px;border-radius:1.25em}.digit-ButtonGroup>.digit-Button{float:left;margin:0 0 0 -1px;border-radius:0}.digit-ButtonGroup>.digit-Button:first-child{border-top-left-radius:inherit;border-bottom-left-radius:inherit}.digit-ButtonGroup>.digit-Button:last-child{border-top-right-radius:inherit;border-bottom-right-radius:inherit}</style></head><body></body></html>'}),montageDefine("59e90da","core/wordpress-connector",{dependencies:["montage/core/core","montage/core/promise","montage","montage"],factory:function(e,t,n){var i=e("montage/core/core").Montage,s=e("montage/core/promise").Promise;t.WordpressConnector=i.specialize({constructor:{value:function(){}},delegate:{value:null},token:{set:function(e){e?sessionStorage.setItem("montage-wordpress-access_token",e):sessionStorage.removeItem("montage-wordpress-access_token")},get:function(){return sessionStorage.getItem("montage-wordpress-access_token")}},clientId:{value:""},secret:{value:""},host:{value:null},path:{value:"/wp-json/wp/v2/"},_getURLParameter:{value:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}},init:{value:function(){function e(){var e=t.getCurrentUser();e.then(function(e){t.delegate&&t.delegate.handleWordPressInitComplete(e)},function(e){t.token=!1,t.delegate&&t.delegate.handleWordPressInitError(e)})}var t=this,n=this._getURLParameter("code"),i="http://"+this.host+"/oauth/token";if(this.token)return void e();if(n){this._issss=!0;var s={Authorization:"Basic "+btoa(this.clientId+":"+this.secret)},o="grant_type=authorization_code&code="+n+"&redirect_uri="+window.location.origin+window.location.pathname;this._makeRequest(i,"post","data",o,s,!0).then(function(n){t.token=n.access_token,e()},function(e){t.token=null,t.delegate&&t.delegate.handleWordPressInitError(e)})}else t.delegate&&t.delegate.handleWordPressInitError({error:"invalid_code",error_description:"No authorizaion code defined."})}},querySiteInfo:{value:function(){var e="http://"+this.host+"/wp-json";return this._makeRequest(e)}},queryPosts:{value:function(e){var t="http://"+this.host+this.path+"posts";return e&&(t+="?filter[category_name]="+e),this._makeRequest(t)}},queryCategory:{value:function(){var e="http://"+this.host+this.path+"taxonomies/category/terms";return this._makeRequest(e)}},createUser:{value:function(e,t,n,i){if(this.token){var s="http://"+this.host+this.path+"users",o={username:e,name:n,password:t,email:i};return this._makeRequest(s,"post","json",o)}return!1}},getCurrentUser:{value:function(e,t,n){if(this.token){var i="http://"+this.host+"/oauth/me";return this._makeRequest(i,"get")}return!1}},doAuthorization:{value:function(){var e="http://"+this.host+"/oauth/authorize?response_type=code&client_id="+this.clientId+"&redirect_uri="+window.location.origin+window.location.pathname;window.open(e,"_self")}},_makeRequest:{value:function(e,t,n,i,o,a){function r(){200===c.status?u.resolve(JSON.parse(c.responseText)):(JSON.parse(c.responseText),u.reject(JSON.parse(c.responseText)))}function l(){JSON.parse(c.responseText),u.reject(JSON.parse(c.responseText))}function h(e){u.notify&&u.notify(e.loaded/e.total)}function d(e){4===c.readyState&&403===c.status&&u.reject(JSON.parse(c.responseText))}var u=s.defer();if(this.host){t||(t="get"),n||(n="jsonp"),this.token&&(e=e.indexOf("?")>=0?e+"&access_token="+this.token:e+"?access_token="+this.token);var c=new XMLHttpRequest;if(c.open(t,e,!0),c.onload=r,c.onerror=l,c.onprogress=h,c.onreadystatechange=d,a&&(c.withCredentials=a),o)for(var m in o)c.setRequestHeader(m,o[m]);try{"json"===n?(c.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i?c.send(JSON.stringify(i)):c.send()):(n="data")?(c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),c.send(i)):c.send(i)}catch(p){}return u.promise}}}},{blueprintModuleId:e("montage")._blueprintModuleIdDescriptor,blueprint:e("montage")._blueprintDescriptor})}}),montageDefine("176abc9","ui/base/abstract-button",{dependencies:["./abstract-control","../../composer/press-composer"],factory:function(e,t,n){var i=e("./abstract-control").AbstractControl,s=e("../../composer/press-composer").PressComposer;t.AbstractButton=i.specialize({constructor:{value:function o(){if(this.constructor===o)throw new Error("AbstractButton cannot be instantiated.");this._pressComposer=new s,this.addComposer(this._pressComposer),this._pressComposer.defineBinding("longPressThreshold ",{"<-":"holdThreshold",source:this}),this.defineBinding("classList.has('montage--disabled')",{"<-":"!enabled"}),this.defineBinding("classList.has('montage--active')",{"<-":"active"})}},enabled:{value:!0},_preventFocus:{value:!1},preventFocus:{get:function(){return this._preventFocus},set:function(e){this._preventFocus=!!e,this.needsDraw=!0}},acceptsActiveTarget:{value:function(){return!this._preventFocus}},willBecomeActiveTarget:{value:function(e){}},_labelNode:{value:void 0,enumerable:!1},_label:{value:void 0,enumerable:!1},label:{get:function(){return this._label},set:function(e){if("undefined"!=typeof e&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=""+e,this.needsDraw=!0}},holdThreshold:{value:1e3},_pressComposer:{value:null},_active:{value:!1},active:{get:function(){return this._active},set:function(e){this._active=e,this.needsDraw=!0}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},addEventListener:{value:function(e,t,n){i.prototype.addEventListener.call(this,e,t,n),"longAction"===e&&this._pressComposer.addEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1),this._preventFocus||this._element.focus()}},handlePress:{value:function(e){this.active=!1,this.dispatchActionEvent(),document.removeEventListener("touchmove",this,!1)}},handleKeyup:{value:function(e){32===e.keyCode&&(this.active=!1,this.dispatchActionEvent())}},handleLongPress:{value:function(e){this._pressComposer.cancelPress();var t=document.createEvent("CustomEvent");t.initCustomEvent("longAction",!0,!0,null),this.dispatchEvent(t)}},handlePressCancel:{value:function(e){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleTouchmove:{value:function(e){e.preventDefault()}},isInputElement:{value:!1},enterDocument:{value:function(e){e&&(this.isInputElement="INPUT"===this.originalElement.tagName,this.isInputElement?void 0===this._label&&(this.label=this.originalElement.value):(this.originalElement.firstChild||this.originalElement.appendChild(document.createTextNode("")),this._labelNode=this.originalElement.firstChild,void 0===this._label&&(this.label=this._labelNode.data)),this.element.setAttribute("role","button"),this.element.addEventListener("keyup",this,!1))}},_drawLabel:{enumerable:!1,value:function(e){this.isInputElement?this._element.value=e:this._labelNode&&(this._labelNode.data=e)}},draw:{value:function(){this._elementNeedsTabIndex()&&(this._preventFocus?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex","-1")),this.isInputElement&&(this.element.disabled=!this.enabled),this._drawLabel(this.label)}},_elementNeedsTabIndexRegex:{value:/INPUT|TEXTAREA|A|SELECT|BUTTON|LABEL/},_elementNeedsTabIndex:{value:function(){return null===this.element.tagName.match(this._elementNeedsTabIndexRegex)}}})}}),montageDefine("176abc9","ui/base/abstract-image",{dependencies:["../component","../../core/mini-url","collections/map"],factory:function(e,t,n){var i=e("../component").Component,s=e("../../core/mini-url"),o=e("collections/map");"undefined"!=typeof window&&(o=window.Map||o),t.AbstractImage=i.specialize({constructor:{value:function a(){if(this.constructor===a)throw new Error("AbstractImage cannot be instantiated.");this.addPathChangeListener("_ownerDocumentPart",this,"_rebaseSrc")}},emptyImageSrc:{value:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},_isLoadingImage:{value:!1},_image:{value:null},_src:{value:null},src:{set:function(e){this._src!==e&&(this._src=e,e=this._getRebasedSrc(),e?(this._isInvalidSrc=!1,this._loadImage(e)):this._isInvalidSrc=!0,this.needsDraw=!0)},get:function(){return this._src}},_loadImage:{value:function(e){this._image&&e===this._image.src||(this._image&&this.constructor.checkinImage(this._image),this._image=this.constructor.checkoutImageWithUrl(e,this),this._isLoadingImage=!this._image.complete)}},_isInvalidSrc:{value:!0},width:{value:null},height:{value:null},_textAlternative:{value:null},textAlternative:{set:function(e){this._textAlternative=e,this.needsDraw=!0},get:function(){return this._textAlternative}},_crossOrigin:{value:null},crossOrigin:{set:function(e){e!==this._crossOrigin&&(this._crossOrigin=e,this.needsDraw=!0)},get:function(){return this._crossOrigin}},_rebaseSrc:{value:function(){var e;e=this._getRebasedSrc(),e&&(this._isInvalidSrc=!1,this._loadImage(e),this.needsDraw=!0)}},_getRebasedSrc:{value:function(){return this._getRebasedUrl(this._src)}},_getRebasedEmptySrc:{value:function(){return this._getRebasedUrl(this.emptyImageSrc)}},_getRebasedUrl:{value:function(e){var t,n=/^[\w\-]+:|^\//;if(e){if(n.test(e))return e;if(this._ownerDocumentPart&&(t=this._ownerDocumentPart.template.getBaseUrl()))return s.resolve(t,e)}return null}},enterDocument:{value:function(e){e&&this.element.setAttribute("role","img")}},draw:{value:function(){var e;e=this._isLoadingImage||this._isInvalidSrc?this._getRebasedEmptySrc():this._getRebasedSrc(),null===this._crossOrigin||void 0===this._crossOrigin||"data:"===e.slice(0,5)?this.element.removeAttribute("crossorigin"):this.element.setAttribute("crossorigin",this._crossOrigin),this.element.src=e,this.element.setAttribute("aria-label",this._textAlternative)}},handleLoad:{value:function(e){this._isLoadingImage=!1,this.needsDraw=!0,e.target.removeEventListener("load",this,!1)}}},{checkoutImageWithUrl:{value:function(e,t){var n=this._imageCache.get(e);return n?n.complete?t.handleLoad({target:n}):n.addEventListener("load",t,!1):(n=this._imagePool.pop()||new Image,n.addEventListener("load",t,!1),n.src=e,this._imageCache.set(e,n),this._imageCacheSize++),this._imagesToClear["delete"](n),this._imageReferenceCount.set(n,(this._imageReferenceCount.get(n)||0)+1),
n}},checkinImage:{value:function(e){var t=this._imageReferenceCount.get(e)-1;0===t?(this._imagesToClear.set(e,Date.now()),this._clearImageInterval||(this._clearImageInterval=setInterval(this._clearImage,this.clearCacheInterval,this))):this._imageReferenceCount.set(e,t)}},_clearImage:{value:function(e){e._imagesToClear.forEach(function(t,n){Date.now()-t>this.maxTimeUnused&&(e._imagePool.push(n),e._imageReferenceCount["delete"](n),e._imageCache["delete"](n.src),n.src=void 0)})}},_imagePool:{value:[]},_imagesToClear:{value:new o},_imageReferenceCount:{value:new o},_imageCache:{value:new o},clearCacheInterval:{value:6e4},maxTimeUnused:{value:6e4},_imageCacheSize:{value:0}})}}),montageDefine("176abc9","ui/flow.reel/flow.html",{text:'<!DOCTYPE html><html><head><meta charset=utf-8><style>.montage-Flow{overflow:hidden}.montage-Flow,.montage-Flow-camera,.montage-Flow-Repetition{position:absolute;top:0;left:0;bottom:0;right:0;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0)}.montage-Flow-camera,.montage-Flow-Repetition{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d}.montage-Flow-Repetition .no-transition,.montage-Flow-Repetition .no-transition *{-webkit-transition:none!important;-moz-transition:none!important;-ms-transition:none!important;transition:none!important}.montage-Flow-Repetition>div{position:absolute;top:50%;left:50%;width:0;height:0;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d}.montage-Flow-Slot{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);-moz-transform:translate3d(-50%,-50%,0);-ms-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}.montage-Flow.camera-disabled .montage-Flow-Repetition>div,.montage-Flow.camera-disabled .montage-Flow-Slot{top:0;left:0}</style><script type=text/montage-serialization>{"repetition":{"prototype":"ui/repetition.reel","values":{"element":{"#":"montage-flow-repetition"},"isSelectionEnabled":{"<-":"@owner.isSelectionEnabled"},"visibleIndexes":{"<-":"@owner._visibleIndexes"},"contentController":{"<-":"@owner.contentController"}}},"flowTranslateComposer":{"prototype":"ui/flow.reel/flow-translate-composer","values":{"flow":{"@":"owner"},"invertAxis":true,"allowFloats":true,"minScroll":0,"maxScroll":{"<-":"@owner.length"},"_momentumDuration":{"<-":"@owner.momentumDuration"},"translateStride":{"<-":"@owner.stride"},"scrollingMode":{"<-":"@owner.scrollingMode"},"linearScrollingVector":{"<-":"@owner.linearScrollingVector"},"isLimitedToSingleStride":{"<-":"@owner.isLimitedToSingleStride"},"delegate":{"<-":"@owner"}}},"slot":{"prototype":"ui/slot.reel","values":{"element":{"#":"montage-flow-slot"},"content":{"<->":"@owner.slotContent"}}},"owner":{"values":{"element":{"#":"montage-flow"},"_repetition":{"@":"repetition"},"_flowTranslateComposer":{"@":"flowTranslateComposer"},"_cameraElement":{"#":"montage-flow-camera"},"scroll":{"<->":"@flowTranslateComposer.scroll"},"selection":{"<->":"@repetition.contentController.selection"},"selectedIndexes":{"<-":"@repetition.selectedIndexes"},"activeIndexes":{"<-":"@repetition.activeIndexes"},"draggedSlideIndex":{"<-":"@flowTranslateComposer._closerIndex"},"_firstIteration":{"<-":"@repetition._drawnIterations.0"}}},":iteration":{"alias":"@repetition:iteration"}}</script></head><body><div data-montage-id=montage-flow class=montage-Flow><div data-montage-id=montage-flow-camera class=montage-Flow-camera><div data-montage-id=montage-flow-repetition class=montage-Flow-Repetition><div data-montage-id=wrapper><div data-param=*></div></div></div><div data-montage-id=montage-flow-slot class=montage-Flow-Slot></div></div></div></body></html>'}),montageDefine("730a65b","ui/post.reel/post.html",{text:'<!DOCTYPE html><html><head><title></title><link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=Bitter:300,400,700" rel=stylesheet type=text/css><style>.Post{top:0;left:0;bottom:0;right:0;position:absolute;font-family:Open Sans,sans-serif;overflow-x:auto;-webkit-overflow-scrolling:touch;background-color:hsl(0,0%,100%)}@media (min-width:500px){.Post{font-size:1.2em}}@media (min-width:800px){.Post{font-size:1.4em}}.Post-content{padding:1rem;max-width:700px;margin-left:auto;margin-right:auto;color:hsl(0,0%,20%)}.Post-imageWrapper{max-height:calc(100% - 5.5em);overflow:hidden}.Post-image{display:block;width:100%;-webkit-user-drag:none}.Post-heading{font-family:"Bitter";font-size:1.8em;font-weight:400}.Post-copy{line-height:1.5em;font-size:.9em}.Post-button.digit-Button{position:fixed;top:2em;left:0;font-size:32px;font-family:"FontAwesome";border:none;color:hsl(0,100%,100%);margin:0;padding:1em;border-radius:0;text-shadow:0 0 1px hsl(0,0%,0%);height:auto;min-width:0;-webkit-transform:translateZ(0)}.Post-button.digit-Button:focus{box-shadow:none}.Post-button.digit-Button.montage--active{color:hsla(0,0%,100%,.5);background:0 0}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}},"postContent":{"prototype":"ui/html.reel","properties":{"element":{"#":"postContent"},"value":"Text"},"bindings":{"value":{"<-":"@owner.post.content.rendered"}}},"postHeading":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"postHeading"},"value":"Text"},"bindings":{"value":{"<-":"@owner.post.title.rendered"}}},"postImage":{"prototype":"digit/ui/image.reel","properties":{"element":{"#":"postImage"},"crossOrigin":null},"bindings":{"src":{"<-":"@owner.post.better_featured_image.source_url"}}}}</script></head><body><div data-montage-id=owner class=Post><div class=Post-imageWrapper><img data-montage-id=postImage class=Post-image src=sample.jpg></div><div class=Post-content><h1 class=Post-heading data-montage-id=postHeading>A trip to Santa Cruz</h1><div class=Post-copy data-montage-id=postContent><p>Or a guy who burns down a bar for the insurance money! Bender, being God isn\'t easy. If you do too much, people get dependent on you, and if you do nothing, they lose hope. You have to use a light touch. Like a safecracker, or a pickpocket. I could if you hadn\'t turned on the light and shut off my stereo. You don\'t know how to do any of those. I barely knew Philip, but as a clergyman I have no problem telling his most intimate friends all about him. Who am I making this out to?</p></div></div></div></body></html>'}),montageDefine("730a65b","ui/logo.reel/logo.html",{text:'<!DOCTYPE html><html><head><title></title><style>.Logo{width:2.5em;height:2.5em}.Logo-svg{fill:inherit;height:100%}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"logo"}}}}</script></head><body><div data-montage-id=logo class=Logo><svg class=Logo-svg viewBox="0 0 128 128"><g fill-rule=evenodd><path d="M0,64.3265306 C0,89.7750204 14.7931429,111.79102 36.2527347,122.203429 L5.57191837,38.144 C1.99836735,46.1479184 0,54.9955918 0,64.3265306 L0,64.3265306 Z M107.744653,61.076898 C107.744653,53.1278367 104.881633,47.6186122 102.439184,43.3371429 C99.179102,38.0342857 96.128,33.5542857 96.128,28.2488163 C96.128,22.3346939 100.597551,16.8359184 106.929633,16.8359184 C107.203918,16.8359184 107.480816,16.8724898 107.755102,16.8907755 C96.3160816,6.40783673 81.0710204,0 64.3265306,0 C41.8481633,0 22.0813061,11.5356735 10.5848163,28.9959184 C12.0973061,29.0429388 13.5131429,29.076898 14.72,29.076898 C21.4517551,29.076898 31.8641633,28.2514286 31.8641633,28.2514286 C35.3227755,28.0581224 35.732898,33.1389388 32.266449,33.556898 C32.266449,33.556898 28.7869388,33.9591837 24.9077551,34.1681633 L48.3343673,103.83151 L62.4117551,61.6228571 L52.3859592,34.1681633 C48.9221224,33.9591837 45.6411429,33.556898 45.6411429,33.556898 C42.1720816,33.3479184 42.5848163,28.0581224 46.0538776,28.2514286 C46.0538776,28.2514286 56.6700408,29.076898 62.986449,29.076898 C69.7103673,29.076898 80.138449,28.2514286 80.138449,28.2514286 C83.5918367,28.0581224 84.0045714,33.1389388 80.5355102,33.556898 C80.5355102,33.556898 77.0612245,33.9591837 73.1794286,34.1681633 L96.4284082,103.301224 L102.846694,81.8729796 C106.106776,73.5111837 107.744653,66.5887347 107.744653,61.076898 L107.744653,61.076898 Z M65.4524082,69.9559184 L46.1505306,126.038204 C51.9105306,127.730939 57.9970612,128.650449 64.3239184,128.650449 C71.808,128.650449 78.996898,127.354776 85.6816327,124.998531 C85.5092245,124.724245 85.3498776,124.436898 85.2218776,124.120816 L65.4524082,69.9559184 L65.4524082,69.9559184 Z M120.758857,33.4602449 C121.043592,35.5160816 121.202939,37.7103673 121.202939,40.0822857 C121.202939,46.6050612 119.977796,53.9402449 116.30498,63.1196735 L96.660898,119.915102 C115.777306,108.771265 128.634776,88.0587755 128.634776,64.3291429 C128.637388,53.1382857 125.779592,42.6292245 120.758857,33.4602449 L120.758857,33.4602449 Z"></path></g></svg></div></body></html>'}),montageDefine("e64bb50","package.json",{exports:{name:"digit",description:"Touch-optimized MontageJS components for tablets and phones.",version:"3.0.3",license:"BSD-3-Clause",repository:{type:"git",url:"git+https://github.com/montagejs/digit.git"},dependencies:{montage:"^17.0.7"},devDependencies:{concurrently:"^3.4.0","http-server":"^0.9.0","jasmine-console-reporter":"^1.2.7","jasmine-core":"^2.5.2",jshint:"^2.9.5",karma:"^1.5.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.0.1","karma-jasmine":"^1.1.0","karma-phantomjs-launcher":"^1.0.2","montage-testing":"git://github.com/montagejs/montage-testing.git#master",open:"0.0.5"},scripts:{lint:"jshint .",test:"node test/run-node.js","test:karma":"karma start --no-auto-watch --single-run","test:karma-dev":"karma start --auto-watch --no-single-run","test:jasmine":'concurrently "http-server -a localhost -p 8085" "open http://localhost:8085/test/run.html"',"start:demo":'concurrently "http-server -a localhost -p 8085" "open http://localhost:8085/demo/sizing/index.html"',"start:overview":'concurrently "http-server -a localhost -p 8085" "open http://localhost:8085/overview/index.html"'},exclude:["demo","report","overview","test"],gitHead:"e869623db2b6913e2777d427a11d42bd19eb54a5",bugs:{url:"https://github.com/montagejs/digit/issues"},homepage:"https://github.com/montagejs/digit#readme",_id:"digit@3.0.3",_shasum:"7ac83774677c1519b12012d2cd2738dd99c186ad",_from:"digit@>=3.0.2 <4.0.0",_npmVersion:"2.15.11",_nodeVersion:"4.8.6",_npmUser:{name:"hthetiot",email:"hthetiot@gmail.com"},dist:{shasum:"7ac83774677c1519b12012d2cd2738dd99c186ad",tarball:"https://registry.npmjs.org/digit/-/digit-3.0.3.tgz",fileCount:118,unpackedSize:1332189},maintainers:[{name:"francoisfrisch",email:"francoisfrisch@gmail.com"},{name:"hthetiot",email:"hthetiot@gmail.com"},{name:"marchant",email:"benoit@montagestudio.com"},{name:"montage-bot",email:"francoisfrisch@gmail.com"}],directories:{},_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/digit_3.0.3_1518662012957_0.4472960276803133"},_resolved:"https://registry.npmjs.org/digit/-/digit-3.0.3.tgz",main:"index",hash:"e64bb50",mappings:{montage:{name:"montage",hash:"176abc9",location:"../montage@176abc9/"}},production:!0,useScriptInjection:!0}}),montageDefine("176abc9","core/geometry/point",{dependencies:["../core"],factory:function(e,t,n){var i=e("../core").Montage,s=t.Point=i.specialize({init:{enumerable:!1,value:function(e,t){return this.x=null===e?0:e,this.y=null===t?0:t,this}},x:{enumerable:!0,value:0},y:{enumerable:!0,value:0}},{interpolate:{enumerable:!1,value:function(e,n,i,s){var o,a;return o=n.x+(i.x-n.x)*e,a=n.y+(i.y-n.y)*e,s>0&&(o=Math.round(o*s)/s,a=Math.round(a*s)/s),(new t.Point).init(o,a)}}}),o=function(e){var t,n,i,s,o=e.ownerDocument;if(e&&o){if(n=o.documentElement,i=o.body,s=o.defaultView,e!==i){if(t=e.getBoundingClientRect(),n.parentOf(e)){var a=n.clientTop||i.clientTop||0,r=n.clientLeft||i.clientLeft||0,l=s.pageYOffset||n.scrollTop||i.scrollTop,h=s.pageXOffset||n.scrollLeft||i.scrollLeft,d=t.top+l-a,u=t.left+h-r;return{top:d,left:u}}return{top:t.top,left:t.left}}return{top:i.offsetTop,left:i.offsetLeft}}return null},a=null,r=function(){s.convertPointFromNodeToPage=function(e,t){return e&&"undefined"==typeof e.x?(t?(a.x=t.x,a.y=t.y):(a.x=0,a.y=0),t=webkitConvertPointFromNodeToPage(e,a),t?(new s).init(t.x,t.y):null):null},s.convertPointFromPageToNode=function(e,t){return e&&"undefined"==typeof e.x?(t?(a.x=t.x,a.y=t.y):(a.x=0,a.y=0),t=webkitConvertPointFromPageToNode(e,a),t?(new s).init(t.x,t.y):null):null}},l=function(){s.convertPointFromNodeToPage=function(e,t){if(!e||"undefined"!=typeof e.x)return null;var n;return(n=o(e))?(new s).init((t?t.x:0)+n.left,(t?t.y:0)+n.top):(new s).init(t?t.x:0,t?t.y:0)},s.convertPointFromPageToNode=function(e,t){if(!e||"undefined"!=typeof e.x)return null;var n;return(n=o(e))?(new s).init((t?t.x:0)-n.left,(t?t.y:0)-n.top):(new s).init(t?t.x:0,t?t.y:0)}};"undefined"!=typeof WebKitPoint&&"undefined"!=typeof webkitConvertPointFromNodeToPage?(a=new WebKitPoint(0,0),r()):l()}}),montageDefine("730a65b","ui/header.reel/header.html",{text:'<!DOCTYPE html><html><head><title></title><style>.Header{position:fixed;top:0;left:0;right:0;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:space-between;justify-content:space-between;padding:.4rem;background:hsla(0,0%,15%,.4);z-index:100}.Header>*{margin:.4rem}.Header .digit-Title{-webkit-flex:1;flex:1;font-size:1.2em;font-weight:400;color:#fff;text-align:center}.Header-closeButton{line-height:1;font-size:24px;padding:0;width:2em;height:2em;min-width:0;border:none}.Header-closeButton:focus{box-shadow:none}.Header-closeButton.is-hidden{visibility:hidden}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}},"closeButton":{"prototype":"digit/ui/button.reel","properties":{"element":{"#":"closeButton"},"label":"×"},"bindings":{"classList.has(\'is-hidden\')":{"<-":"!@owner.selectedPost"}},"listeners":[{"type":"action","listener":{"@":"owner"}}]},"logo":{"prototype":"ui/logo.reel","properties":{"element":{"#":"logo"}}},"title":{"prototype":"digit/ui/title.reel","properties":{"element":{"#":"title"},"value":"Blog Reader"}}}</script></head><body><header data-montage-id=owner class=Header><div data-montage-id=logo></div><h1 data-montage-id=title></h1><button data-montage-id=closeButton class=Header-closeButton></button></header></body></html>'}),montageDefine("730a65b","ui/card.reel/card.html",{text:'<!DOCTYPE html><html><head><title></title><style>.Card-face{display:block;position:absolute;width:500px;height:500px}.Card-face--back{display:none;-webkit-transform:rotateY(180deg) translateZ(100px);background:hsl(0,0%,95%)}.Card-image{display:block;width:500px;height:500px;-webkit-user-drag:none;object-fit:cover}.Card-caption{width:100%;background-color:#000}.Card-title{margin:0;padding:1em 1.5em;font-family:"Open Sans",sans-serif;text-transform:uppercase;line-height:1.5em;letter-spacing:1.2px;font-size:1.5em;color:#fff}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}},"image":{"prototype":"digit/ui/image.reel","properties":{"element":{"#":"image"},"crossOrigin":null},"bindings":{"src":{"<-":"@owner.post.better_featured_image.source_url"}}},"text1":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"text1"},"value":"Text"},"bindings":{"value":{"<-":"@owner.post.title.rendered"}}}}</script></head><body><div data-montage-id=owner class=Card><div class="Card-face Card-face--front"><img data-montage-id=image class=Card-image><div class=Card-caption><p data-montage-id=text1 class=Card-title></p></div></div><div class="Card-face Card-face--back"><p></p></div></div></body></html>'}),montageDefine("176abc9","composer/composer",{dependencies:["../core/target","../core/event/event-manager"],factory:function(e,t,n){var i=e("../core/target").Target,s=e("../core/event/event-manager").defaultEventManager;t.Composer=i.specialize({_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},_shawdowRoot:{value:null},shawdowRoot:{get:function(){return this._shawdowRoot||(this._shawdowRoot=s.shawdowRootFromNode(this.element)),this._shawdowRoot}},lazyLoad:{value:!0},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:Function.noop},_resolveDefaults:{value:function(){this.element||null!==this.element||null===this.component||(this.element=this.component.element)}},_isLoaded:{value:!1},isLoaded:{get:function(){return this._isLoaded}},load:{value:Function.noop},unload:{value:Function.noop},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}},{isCoordinateOutsideRadius:{value:function(e,t,n){return e*e+t*t>n*n}}})}}),montageDefine("730a65b","ui/main.reel/main",{dependencies:["montage/ui/component"],factory:function(e,t,n){var i=e("montage/ui/component").Component;t.Main=i.specialize({constructor:{value:function(){this["super"]();var e=this.getParameterByName("hostname");e&&(this.hostname=e)}},hostname:{value:"demo.wp-api.org"},posts:{value:null},enterDocument:{value:function(e){var t=this;e&&this.templateObjects.wordpressConnector.queryPosts("featured").then(function(e){t.posts=e.map(function(e){return e.better_featured_image=e.better_featured_image||e.featured_image,e.better_featured_image.source_url=e.better_featured_image.source||e.better_featured_image.source_url||"../../assets/images/default.jpg",e})})}},getParameterByName:{value:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=n.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}}})}}),montageDefine("176abc9","ui/text.reel/text",{dependencies:["../component"],factory:function(e,t,n){var i=e("../component").Component,s=t.Text=i.specialize({hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},enterDocument:{value:function(e){if(e){var t=this._RANGE;t.selectNodeContents(this.element),t.deleteContents(),this._valueNode=document.createTextNode(""),t.insertNode(this._valueNode),this.element.classList.add("montage-Text")}}},draw:{value:function(){var e="undefined"!=typeof this._value&&null!==this._value?this._value:this.defaultValue;this._valueNode.data=this.converter?this.converter.convert(e):e}}});window.MontageElement&&MontageElement.define("montage-text",s,{observedAttributes:["value"]})}}),montageDefine("176abc9","core/event/action-event-listener",{dependencies:["../core","../core","../core","../core","../core"],factory:function(e,t,n){var i=e("../core").Montage;t.ActionEventListener=i.specialize({handler:{value:null},action:{value:null},initWithHandler_action_:{value:function(e,t){return this.handler=e,this.action=t,this}},handleEvent:{value:function(e){if("function"==typeof this.action){var t=this.handler?this.handler:this;this.action.call(t,e)}else this.handler&&this.action&&this.handler[this.action](e)}},serializeProperties:{value:function(e){e.set("handler",this.handler,"reference"),e.set("action",this.action)}}},{objectDescriptorModuleId:e("../core")._objectDescriptorModuleIdDescriptor,objectDescriptor:e("../core")._objectDescriptorDescriptor,blueprintModuleId:e("../core")._blueprintModuleIdDescriptor,blueprint:e("../core")._blueprintDescriptor})}}),montageDefine("176abc9","ui/slot.reel/slot",{dependencies:["../component"],factory:function(e,t,n){var i=e("../component").Component;t.Slot=i.specialize({hasTemplate:{enumerable:!1,value:!1},delegate:{value:null},_content:{value:null},enterDocument:{value:function(e){e&&this.element.classList.add("montage-Slot")}},content:{get:function(){return this._content},set:function(e){var t,n;e&&"undefined"!=typeof e.needsDraw?(n=this._content,e.element?t=e.element:(t=document.createElement("div"),this.delegate&&"function"==typeof this.delegate.slotElementForComponent&&(t=this.delegate.slotElementForComponent(this,e,t)),e.element=t),this.domContent=t,e.needsDraw=!0):this.domContent=e,this._content=e,this.needsDraw=!0}},contentDidChange:{value:function(){this.delegate&&"function"==typeof this.delegate.slotDidSwitchContent&&this.delegate.slotDidSwitchContent(this)}}})}}),montageDefine("176abc9","ui/base/abstract-control",{dependencies:["../component","collections/map"],factory:function(e,t,n){var i=e("../component").Component,s=e("collections/map");t.AbstractControl=i.specialize({dispatchActionEvent:{value:function(){return this.dispatchEvent(this.createActionEvent())}},_detail:{value:null},detail:{get:function(){return null!==this._detail&&void 0!==this._detail||(this._detail=new s),this._detail}},createActionEvent:{value:function(){var e,t=document.createEvent("CustomEvent");return e=this._detail,t.initCustomEvent("action",!0,!0,e),t}},disabled:{get:function(){return!this.enabled},set:function(e){"boolean"==typeof e&&(this.enabled=!e)}}})}}),montageDefine("59e90da","package.json",{exports:{name:"montage-wordpress",version:"0.1.0",dependencies:{montage:"~0.15.0"},gitHead:"eaa05ff5ee7a636fe5b907412657cd6b4cf5ff19",readmeFilename:"README.md",description:"A data connector to facilitate working with Wordpress REST API",_id:"montage-wordpress@0.1.0",_shasum:"9946acdd04ea54a55dfc5563c6c24c13fe778bed",_from:"montagestudio/montage-wordpress#master",_resolved:"git://github.com/montagestudio/montage-wordpress.git#2274528faf6f521dddde763d05a37ae4f50448d6",main:"index",hash:"59e90da",mappings:{montage:{name:"montage",hash:"176abc9",location:"../montage@176abc9/"}},production:!0,useScriptInjection:!0}}),montageDefine("730a65b","ui/html.reel/html",{dependencies:["montage","montage/ui/component"],factory:function(e,t,n){var i=(e("montage").Montage,e("montage/ui/component").Component);t.Html=i.specialize({hasTemplate:{value:!1},constructor:{value:function(){this["super"](),this.value=null,this.addOwnPropertyChangeListener("value",this)}},canDraw:{value:function(){return null!==this.value}},handleValueChange:{value:function(){this.needsDraw=!0}},iteration:{value:null},value:{value:""},object:{value:null},draw:{value:function(){this.element.innerHTML=this.value}}})}}),montageDefine("e64bb50","ui/title.reel/title.html",{text:'<!DOCTYPE html><html><head><title></title><style>.digit-Title{margin:0;padding:0;font-size:1.5em;line-height:1.5}[data-montage-skin="light"] .digit-Title{color:hsl(0,0%,40%);text-shadow:0 1px 0 hsla(0,0%,100%,.8)}[data-montage-skin="dark"] .digit-Title{color:hsl(0,0%,80%)}</style></head><body></body></html>'}),montageDefine("730a65b","ui/header.reel/header",{dependencies:["montage/ui/component"],factory:function(e,t,n){var i=e("montage/ui/component").Component;t.Header=i.specialize({constructor:{value:function(){this["super"]()}},handleCloseButtonAction:{value:function(){this.dispatchEventNamed("hidePost",!0,!0)}}})}}),montageDefine("e64bb50","ui/button.reel/button",{dependencies:["montage/ui/base/abstract-button"],factory:function(e,t,n){var i=e("montage/ui/base/abstract-button").AbstractButton;t.Button=i.specialize({hasTemplate:{value:!0},constructor:{value:function(){this["super"](),this.classList.add("digit-Button")}}})}}),montageDefine("e64bb50","ui/image.reel/image.html",{text:'<!DOCTYPE html><html><head><title></title><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"image"}}}}</script></head><body><img data-montage-id=image class=digit-Image></body></html>'}),montageDefine("e64bb50","ui/title.reel/title",{dependencies:["montage/ui/text.reel"],factory:function(e,t,n){var i=e("montage/ui/text.reel").Text;t.Title=i.specialize({hasTemplate:{value:!0},constructor:{value:function(){this["super"](),this.classList.add("digit-Title")}}})}}),montageDefine("730a65b","ui/logo.reel/logo",{dependencies:["montage/ui/component"],factory:function(e,t,n){var i=e("montage/ui/component").Component;t.Logo=i.specialize({constructor:{value:function(){this["super"]()}}})}}),montageDefine("730a65b","ui/post.reel/post",{dependencies:["montage/ui/component"],factory:function(e,t,n){var i=e("montage/ui/component").Component;t.Post=i.specialize({constructor:{value:function(){this["super"]()}}})}}),montageDefine("730a65b","ui/card.reel/card",{dependencies:["montage/ui/component"],factory:function(e,t,n){var i=e("montage/ui/component").Component;t.Card=i.specialize({constructor:{value:function(){this["super"]()}}})}}),montageDefine("e64bb50","ui/image.reel/image",{dependencies:["montage/ui/base/abstract-image"],factory:function(e,t,n){var i=e("montage/ui/base/abstract-image").AbstractImage;t.Image=i.specialize({})}});
bundleLoaded("index.html.bundle-1-0.js")